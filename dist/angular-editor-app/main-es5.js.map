{"version":3,"sources":["webpack:///projects/angular-editor/src/lib/utils.ts","webpack:///projects/angular-editor/src/lib/angular-editor-toolbar.component.ts","webpack:///projects/angular-editor/src/lib/angular-editor-toolbar.component.html","webpack:///projects/angular-editor/src/lib/ae-select/ae-select.component.ts","webpack:///projects/angular-editor/src/lib/ae-select/ae-select.component.html","webpack:///projects/angular-editor-app/src/main.ts","webpack:///projects/angular-editor/src/lib/angular-editor.module.ts","webpack:///projects/angular-editor-app/src/app/app.module.ts","webpack:///projects/angular-editor/src/lib/angular-editor.component.ts","webpack:///projects/angular-editor/src/lib/angular-editor.component.html","webpack:///projects/angular-editor-app/$_lazy_route_resource lazy namespace object","webpack:///projects/angular-editor/src/lib/angular-editor.service.ts","webpack:///projects/angular-editor-app/src/environments/environment.ts","webpack:///projects/angular-editor/src/lib/config.ts","webpack:///projects/angular-editor-app/src/app/app.component.ts","webpack:///projects/angular-editor-app/src/app/app.component.html"],"names":["isDefined","value","undefined","AngularEditorToolbarComponent","r","editorService","er","doc","htmlMode","linkSelected","block","fontName","fontSize","headings","label","fontSizes","customClassId","customClassList","tagMap","BLOCKQUOTE","A","select","buttons","fonts","execute","classes","_customClasses","map","x","i","name","toString","unshift","Boolean","selectedText","colorPicker","fgInput","nativeElement","container","closeButton","format","height","onChange","updateFgColor","bind","onUpdate","palette","paletteCols","position","command","emit","showToolbar","forEach","e","result","queryCommandState","elementById","getElementById","id","addClass","removeClass","nodes","findIndex","nodeName","found","y","node","find","toLowerCase","index","Element","className","Object","keys","foreColour","queryCommandValue","replace","backColor","url","selection","savedSelection","commonAncestorContainer","parentElement","parent","href","prompt","createLink","insertVideo","color","where","insertColor","foreColor","setFontName","setFontSize","m","toggleEditorModeButton","event","file","target","files","type","includes","upload","subscribe","watchUploadImage","uploadUrl","uploadImage","reader","FileReader","onload","fr","currentTarget","insertImage","readAsDataURL","response","imageUrl","body","srcElement","classId","createCustomClass","hiddenButtons","Array","arr","item","console","log","show","AeSelectComponent","elRef","options","disabled","optionId","opened","hidden","changeEvent","onTouched","selectedOption","hasOwnProperty","isHidden","hide","option","stopPropagation","setValue","$event","contains","close","selectedEl","el","fn","isDisabled","labelButton","div","action","key","_handleArrowDown","_handleArrowUp","_handleSpace","_handleEnter","_handleTab","preventDefault","_handleBackspace","length","optionSelect","provide","useExisting","multi","toggleOpen","production","bootstrapModule","err","error","AngularEditorModule","AppModule","AngularEditorComponent","sanitizer","cdRef","defaultTabIndex","autoFocus","modeVisual","showPlaceholder","focused","touched","changed","config","placeholder","viewMode","blurEvent","focusEvent","tabindex","parsedTabIndex","Number","tabIndex","focus","toolbarPosition","rawPaste","text","clipboardData","getData","document","execCommand","toggleEditorMode","removeSelectedElements","getCustomTags","onContentChange","textArea","executeCommand","exec","executeInNextQueueIteration","configure","saveSelection","relatedTarget","classList","sourceText","element","html","innerHTML","innerText","sanitize","HTML","togglePlaceholder","refreshView","normalizedValue","setProperty","editorWrapper","bToSource","oContent","editableElement","createText","oPre","createElement","setStyle","oCode","appendChild","focusInstance","listen","onTextAreaFocus","blurInstance","onTextAreaBlur","querySelectorAll","createRange","selectNodeContents","firstChild","editorToolbar","setEditorMode","triggerButtons","userSelection","getSelection","a","focusNode","els","parentNode","triggerBlocks","uploadWithCredentials","defaultParagraphSeparator","setDefaultParagraphSeparator","defaultFontName","defaultFontSize","tags","customClasses","tag","push","join","onTextAreaMouseOut","onPaste","webpackEmptyAsyncContext","req","Promise","resolve","then","Error","code","module","exports","AngularEditorService","http","sel","getRangeAt","rangeCount","commands","newUrl","insertHtml","restored","restoreSelection","isHTMLInserted","removeAllRanges","addRange","callbackFn","timeout","setTimeout","uploadData","FormData","append","post","reportProgress","observe","withCredentials","separator","customClass","newTag","tagName","videoUrl","match","insertYouTubeVideoTag","insertVimeoVideoTag","split","thumbnail","sub","get","data","thumbnail_url_with_play_button","title","unsubscribe","hasChildNodes","nextSibling","range","includePartiallySelectedContainers","startContainer","endNode","endContainer","rangeNodes","nextNode","len","apply","getRangeSelectedNodes","insertBefore","removeChild","tagNames","tagNamesArray","getSelectedNodes","nodeType","indexOf","replaceWithOwnChildren","environment","angularEditorConfig","editable","spellcheck","minHeight","maxHeight","width","minWidth","translate","enableToolbar","outline","AppComponent","formBuilder","htmlContent1","htmlContent2","config1","toolbarHiddenButtons","config2","form","group","signature","required","warn","onBlur","onChange2"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAO,eAASA,SAAT,CAAmBC,KAAnB,EAA+B;AACpC,eAAOA,KAAK,KAAKC,SAAV,IAAuBD,KAAK,KAAK,IAAxC;AACD;;;;;;;;;;;;;;;;;ACFD;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;ACkHE;;AACE;;AACW;AAAA;;AAAA;;AAAA;AAAA,aAA2B,QAA3B,EAA2B;AAAA;;AAAA;;AAAA;AAAA,WAA3B;;AAIc;;AAC3B;;;;;;AANyC;;AAAA,sGAA2B,SAA3B,EAA2B,oBAA3B,EAA2B,UAA3B,EAA2B,eAA3B,EAA2B,QAA3B,EAA2B,sCAA3B;;;;;;;;AAnH3C;;AACE;;AACE;;AAAiE;AAAA;;AAAA;;AAAA,yCAAwB,MAAxB;AAA8B,WAA9B;;AACT;;AAC/B;;AACzB;;AAAiE;AAAA;;AAAA;;AAAA,0CAAwB,MAAxB;AAA8B,WAA9B;;AACT;;AAC7B;;AAC7B;;AACA;;AACE;;AAAmF;AAAA;;AAAA;;AAAA,0CAAwB,MAAxB;AAA8B,WAA9B;;AACL;;AAA0B;;AACxG;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,QAAxB;AAAgC,WAAhC;;AACwE;;AAChF;;AACA;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,WAAxB;AAAmC,WAAnC;;AACc;;AAA+B;;AACrD;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,eAAxB;AAAuC,WAAvC;;AACc;;AAAmC;;AACzD;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,WAAxB;AAAmC,WAAnC;;AACc;;AAA+B;;AACrD;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,aAAxB;AAAqC,WAArC;;AACc;;AAAiC;;AACzD;;AACA;;AACE;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,aAAxB;AAAqC,WAArC;;AACc;;AACS;;AAC/B;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,eAAxB;AAAuC,WAAvC;;AACc;;AACW;;AACjC;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,cAAxB;AAAsC,WAAtC;;AAEN;;AAAiC;;AACnC;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,aAAxB;AAAqC,WAArC;;AACc;;AACY;;AACpC;;AACA;;AACE;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,QAAxB;AAAgC,WAAhC;;AACwE;;AACrD;;AAC3B;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,SAAxB;AAAiC,WAAjC;;AACyE;;AACrD;;AAC9B;;AACA;;AACE;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,qBAAxB;AAA6C,WAA7C;;AAC+D;;AAC3C;;AAC5B;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,mBAAxB;AAA2C,WAA3C;;AAC6D;;AACzC;;AAC9B;;AACA;;AAEE;;AACW;AAAA;;AAAA;;AAAA;AAAA,aAAmB,QAAnB,EAAmB;AAAA;;AAAA;;AAAA;AAAA,WAAnB;;AAIc;;AAC3B;;AACA;;AAEE;;AACW;AAAA;;AAAA;;AAAA;AAAA,aAAsB,QAAtB,EAAsB;AAAA;;AAAA;;AAAA;AAAA,WAAtB;;AAIc;;AAC3B;;AACA;;AAEE;;AACW;AAAA;;AAAA;;AAAA;AAAA,aAAsB,QAAtB,EAAsB;AAAA;;AAAA;;AAAA;AAAA,WAAtB;;AAKX;;AACF;;AACA;;AACE;;AAGA;;AAAuF;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAEJ;;AAClD;;AAA0B;;AAC3D;;AACA;;AAEe;AAAA;;AAAA;;AAAA;;AAAA,kDAAqC,iBAArC;AAAsD,WAAtD;;AAFf;;AAIA;;AAAuF;AAAA;;AAAA;;AAAA;;AAAA;AAAA,mBAAoB,WAApB;AAAmC,WAAnC;;AAEE;;AACxD;;AAA0B;;AAC3D;;AACF;;AACA;;AAQA;;AACE;;AAAsE;AAAA;;AAAA;;AAAA;AAAA;;AAEpE;;AACF;;AACA;;AAAwE;AAAA;;AAAA;;AAAA,0CAAwB,QAAxB;AAAgC,WAAhC;;AAEtE;;AACF;;AACA;;AAGc;AAAA;;AAAA;;AAAA;AAAA;;AAHd;;AAKA;;AAA6E;AAAA;;AAAA;;AAAA;;AAAA;AAAA,mBAAkB,WAAlB;AAAmC,WAAnC;;AAEQ;;AACrF;;AACA;;AACQ;AAAA;;AAAA;;AAAA;AAAA;;AACc;;AACW;;AACjC;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,sBAAxB;AAA8C,WAA9C;;AACgE;;AAC9C;;AAC5B;;AACA;;AACE;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,cAAxB;AAAsC,WAAtC;;AACc;;AACtB;;AACF;;AACA;;AACE;;AACQ;AAAA;;AAAA;;AAAA,0CAAwB,kBAAxB;AAA0C,WAA1C;;AAAyG;;AACxF;;AAC3B;;AACF;;;;;;AA7JY;;AAAA;;AAGA;;AAAA;;AAIA;;AAAA,8FAAiB,UAAjB,EAAiB,eAAjB,EAAiB,QAAjB,EAAiB,6BAAjB;;AAEA;;AAAA,gGAAmB,UAAnB,EAAmB,eAAnB,EAAmB,QAAnB,EAAmB,+BAAnB;;AAIA;;AAAA,mGAAsB,UAAtB,EAAsB,eAAtB,EAAsB,QAAtB,EAAsB,kCAAtB;;AAGA;;AAAA,uGAA0B,UAA1B,EAA0B,eAA1B,EAA0B,QAA1B,EAA0B,sCAA1B;;AAGA;;AAAA,mGAAsB,UAAtB,EAAsB,eAAtB,EAAsB,QAAtB,EAAsB,kCAAtB;;AAGA;;AAAA,qGAAwB,UAAxB,EAAwB,eAAxB,EAAwB,QAAxB,EAAwB,oCAAxB;;AAKA;;AAAA,qGAAwB,UAAxB,EAAwB,eAAxB,EAAwB,QAAxB,EAAwB,oCAAxB;;AAIA;;AAAA,uGAA0B,UAA1B,EAA0B,eAA1B,EAA0B,QAA1B,EAA0B,sCAA1B;;AAIA;;AAAA,sGAAyB,UAAzB,EAAyB,eAAzB,EAAyB,QAAzB,EAAyB,qCAAzB;;AAIA;;AAAA,qGAAwB,UAAxB,EAAwB,eAAxB,EAAwB,QAAxB,EAAwB,oCAAxB;;AAMA;;AAAA,gGAAmB,UAAnB,EAAmB,eAAnB,EAAmB,QAAnB,EAAmB,+BAAnB;;AAIA;;AAAA,iGAAoB,UAApB,EAAoB,eAApB,EAAoB,QAApB,EAAoB,gCAApB;;AAMA;;AAAA,6GAAgC,UAAhC,EAAgC,eAAhC,EAAgC,QAAhC,EAAgC,4CAAhC;;AAIA;;AAAA,2GAA8B,UAA9B,EAA8B,eAA9B,EAA8B,QAA9B,EAA8B,0CAA9B;;AAO0B;;AAAA,+FAAoB,SAApB,EAAoB,YAApB,EAAoB,UAApB,EAAoB,eAApB,EAAoB,QAApB,EAAoB,gCAApB;;AASH;;AAAA,4FAAiB,SAAjB,EAAiB,eAAjB,EAAiB,UAAjB,EAAiB,eAAjB,EAAiB,QAAjB,EAAiB,iCAAjB;;AASK;;AAAA,gGAAqB,SAArB,EAAqB,eAArB,EAAqB,UAArB,EAAqB,eAArB,EAAqB,QAArB,EAAqB,iCAArB;;AAY5B;;AAAA,+GAAkC,UAAlC,EAAkC,eAAlC,EAAkC,QAAlC,EAAkC,kCAAlC;;AASA;;AAAA,+GAAkC,UAAlC,EAAkC,eAAlC,EAAkC,QAAlC,EAAkC,wCAAlC;;AAMJ;;AAAA;;AASI;;AAAA,8FAAiB,UAAjB,EAAiB,2BAAjB,EAAiB,QAAjB,EAAiB,6BAAjB;;AAIA;;AAAA,gGAAmB,UAAnB,EAAmB,uCAAnB,EAAmB,QAAnB,EAAmB,+BAAnB;;AASA;;AAAA,qGAAwB,UAAxB,EAAwB,eAAxB,EAAwB,QAAxB,EAAwB,oCAAxB;;AAIA;;AAAA,qGAAwB,UAAxB,EAAwB,eAAxB,EAAwB,QAAxB,EAAwB,oCAAxB;;AAIA;;AAAA,8GAAiC,UAAjC,EAAiC,eAAjC,EAAiC,QAAjC,EAAiC,6CAAjC;;AAMA;;AAAA,yGAA4B,UAA5B,EAA4B,eAA5B,EAA4B,QAA5B,EAA4B,qCAA5B;;AAMA;;AAAA,0GAA6B,QAA7B,EAA6B,yCAA7B;;;;ADhJX;;AAQM;AAAA,YAAME,6BAAN;AAgJL,iDACUC,CADV,EAEUC,aAFV,EAGUC,EAHV,EAI4BC,GAJ5B,EAIoC;AAAA;;AAH1B,iBAAAH,CAAA,GAAAA,CAAA;AACA,iBAAAC,aAAA,GAAAA,aAAA;AACA,iBAAAC,EAAA,GAAAA,EAAA;AACkB,iBAAAC,GAAA,GAAAA,GAAA;AAnJ5B,iBAAAC,QAAA,GAAW,KAAX;AACA,iBAAAC,YAAA,GAAe,KAAf;AACA,iBAAAC,KAAA,GAAQ,SAAR;AACA,iBAAAC,QAAA,GAAW,iBAAX;AACA,iBAAAC,QAAA,GAAW,GAAX;AAIA,iBAAAC,QAAA,GAA2B,CACzB;AACEC,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aADyB,EAKzB;AACEa,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aALyB,EASzB;AACEa,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aATyB,EAazB;AACEa,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aAbyB,EAiBzB;AACEa,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aAjByB,EAqBzB;AACEa,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aArByB,EAyBzB;AACEa,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aAzByB,EA6BzB;AACEa,mBAAK,EAAE,WADT;AAEEb,mBAAK,EAAE;AAFT,aA7ByB,EAiCzB;AACEa,mBAAK,EAAE,YADT;AAEEb,mBAAK,EAAE;AAFT,aAjCyB,EAqCzB;AACEa,mBAAK,EAAE,UADT;AAEEb,mBAAK,EAAE;AAFT,aArCyB,EAyCzB;AACEa,mBAAK,EAAE,SADT;AAEEb,mBAAK,EAAE;AAFT,aAzCyB,CAA3B;AA+CA,iBAAAc,SAAA,GAA4B,CAC1B;AACED,mBAAK,EAAE,GADT;AAEEb,mBAAK,EAAE;AAFT,aAD0B,EAK1B;AACEa,mBAAK,EAAE,GADT;AAEEb,mBAAK,EAAE;AAFT,aAL0B,EAS1B;AACEa,mBAAK,EAAE,GADT;AAEEb,mBAAK,EAAE;AAFT,aAT0B,EAa1B;AACEa,mBAAK,EAAE,GADT;AAEEb,mBAAK,EAAE;AAFT,aAb0B,EAiB1B;AACEa,mBAAK,EAAE,GADT;AAEEb,mBAAK,EAAE;AAFT,aAjB0B,EAqB1B;AACEa,mBAAK,EAAE,GADT;AAEEb,mBAAK,EAAE;AAFT,aArB0B,EAyB1B;AACEa,mBAAK,EAAE,GADT;AAEEb,mBAAK,EAAE;AAFT,aAzB0B,CAA5B;AA+BA,iBAAAe,aAAA,GAAgB,IAAhB;AAGA,iBAAAC,eAAA,GAAkC,CAAC;AAACH,mBAAK,EAAE,EAAR;AAAYb,mBAAK,EAAE;AAAnB,aAAD,CAAlC,CA0DoC,CAzDpC;;AAEA,iBAAAiB,MAAA,GAAS;AACPC,wBAAU,EAAE,QADL;AAEPC,eAAC,EAAE;AAFI,aAAT;AAKA,iBAAAC,MAAA,GAAS,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,GAArC,EAA0C,KAA1C,EAAiD,KAAjD,CAAT;AAEA,iBAAAC,OAAA,GAAU,CAAC,MAAD,EAAS,QAAT,EAAmB,WAAnB,EAAgC,eAAhC,EAAiD,WAAjD,EAA8D,aAA9D,EAA6E,aAA7E,EAA4F,eAA5F,EACR,cADQ,EACQ,aADR,EACuB,QADvB,EACiC,SADjC,EAC4C,qBAD5C,EACmE,mBADnE,EACwF,MADxF,CAAV;AAOS,iBAAAC,KAAA,GAAwB,CAAC;AAACT,mBAAK,EAAE,EAAR;AAAYb,mBAAK,EAAE;AAAnB,aAAD,CAAxB;AA2BC,iBAAAuB,OAAA,GAAgC,IAAI,0DAAJ,EAAhC;AAgBT;;AAtJI;AAAA;AAAA,iBA6GL,aACkBC,OADlB,EAC0C;AACxC,kBAAIA,OAAJ,EAAa;AACX,qBAAKC,cAAL,GAAsBD,OAAtB;AACA,qBAAKR,eAAL,GAAuB,KAAKS,cAAL,CAAoBC,GAApB,CAAwB,UAACC,CAAD,EAAIC,CAAJ;AAAA,yBAAW;AAACf,yBAAK,EAAEc,CAAC,CAACE,IAAV;AAAgB7B,yBAAK,EAAE4B,CAAC,CAACE,QAAF;AAAvB,mBAAX;AAAA,iBAAxB,CAAvB;AACA,qBAAKd,eAAL,CAAqBe,OAArB,CAA6B;AAAClB,uBAAK,EAAE,aAAR;AAAuBb,uBAAK,EAAE;AAA9B,iBAA7B;AACD;AACF;AApHI;AAAA;AAAA,iBAsHL,aACoBA,KADpB,EACmC;AACjC,kBAAIA,KAAJ,EAAW;AACT,qBAAKU,QAAL,GAAgBV,KAAhB;AACD;AACF;AA3HI;AAAA;AAAA,iBA6HL,aACoBA,KADpB,EACmC;AACjC,kBAAIA,KAAJ,EAAW;AACT,qBAAKW,QAAL,GAAgBX,KAAhB;AACD;AACF;AAlII;AAAA;AAAA,iBA4IL,eAA+B;AAC7B,qBAAO,KAAKO,QAAL,IAAiB,CAACyB,OAAO,CAAC,KAAK5B,aAAL,CAAmB6B,YAApB,CAAhC;AACD;AA9II;AAAA;AAAA,mBAwJL,2BAAkB;AAChB;AACA;AACA,mBAAKC,WAAL,GAAmB,IAAI,gDAAJ,CAAY,KAAKC,OAAL,CAAaC,aAAzB,EAAwC;AACzDC,yBAAS,EAAE,KAAKhC,EAAL,CAAQ+B,aADsC;AAEzDE,2BAAW,EAAE,IAF4C;AAGzDC,sBAAM,EAAE,KAHiD;AAIzDC,sBAAM,EAAE,EAJiD;AAKzDC,wBAAQ,EAAE,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAL+C;AAMzDC,wBAAQ,EAAE,KAAKF,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAN+C;AAOzDE,uBAAO,EAAE,2EAPgD;AAQzDC,2BAAW,EAAE,EAR4C;AASzDC,wBAAQ,EAAE;AAT+C,eAAxC,CAAnB;AAWD;AAED;;;;;AAxKK;AAAA;AAAA,mBA4KL,wBAAeC,OAAf,EAAgC;AAC9B,mBAAKzB,OAAL,CAAa0B,IAAb,CAAkBD,OAAlB;AACD;AAED;;;;AAhLK;AAAA;AAAA,mBAmLL,0BAAiB;AAAA;;AACf,kBAAI,CAAC,KAAKE,WAAV,EAAuB;AACrB;AACD;;AACD,mBAAK7B,OAAL,CAAa8B,OAAb,CAAqB,UAAAC,CAAC,EAAI;AACxB,oBAAMC,MAAM,GAAG,KAAI,CAAC/C,GAAL,CAASgD,iBAAT,CAA2BF,CAA3B,CAAf;;AACA,oBAAMG,WAAW,GAAG,KAAI,CAACjD,GAAL,CAASkD,cAAT,CAAwBJ,CAAC,GAAG,GAAJ,GAAU,KAAI,CAACK,EAAvC,CAApB;;AACA,oBAAIJ,MAAJ,EAAY;AACV,uBAAI,CAAClD,CAAL,CAAOuD,QAAP,CAAgBH,WAAhB,EAA6B,QAA7B;AACD,iBAFD,MAEO;AACL,uBAAI,CAACpD,CAAL,CAAOwD,WAAP,CAAmBJ,WAAnB,EAAgC,QAAhC;AACD;AACF,eARD;AASD;AAED;;;;AAlMK;AAAA;AAAA,mBAqML,uBAAcK,KAAd,EAA6B;AAAA;;AAC3B,kBAAI,CAAC,KAAKV,WAAV,EAAuB;AACrB;AACD;;AACD,mBAAK1C,YAAL,GAAoBoD,KAAK,CAACC,SAAN,CAAgB,UAAAlC,CAAC;AAAA,uBAAIA,CAAC,CAACmC,QAAF,KAAe,GAAnB;AAAA,eAAjB,IAA2C,CAAC,CAAhE;AACA,kBAAIC,KAAK,GAAG,KAAZ;AACA,mBAAK3C,MAAL,CAAY+B,OAAZ,CAAoB,UAAAa,CAAC,EAAI;AACvB,oBAAMC,IAAI,GAAGL,KAAK,CAACM,IAAN,CAAW,UAAAvC,CAAC;AAAA,yBAAIA,CAAC,CAACmC,QAAF,KAAeE,CAAnB;AAAA,iBAAZ,CAAb;;AACA,oBAAIC,IAAI,KAAKhE,SAAT,IAAsB+D,CAAC,KAAKC,IAAI,CAACH,QAArC,EAA+C;AAC7C,sBAAIC,KAAK,KAAK,KAAd,EAAqB;AACnB,0BAAI,CAACtD,KAAL,GAAawD,IAAI,CAACH,QAAL,CAAcK,WAAd,EAAb;AACAJ,yBAAK,GAAG,IAAR;AACD;AACF,iBALD,MAKO,IAAIA,KAAK,KAAK,KAAd,EAAqB;AAC1B,wBAAI,CAACtD,KAAL,GAAa,SAAb;AACD;AACF,eAVD;AAYAsD,mBAAK,GAAG,KAAR;;AACA,kBAAI,KAAKtC,cAAT,EAAyB;AACvB,qBAAKA,cAAL,CAAoB0B,OAApB,CAA4B,UAACa,CAAD,EAAII,KAAJ,EAAc;AACxC,sBAAMH,IAAI,GAAGL,KAAK,CAACM,IAAN,CAAW,UAAAvC,CAAC,EAAI;AAC3B,wBAAIA,CAAC,YAAY0C,OAAjB,EAA0B;AACxB,6BAAO1C,CAAC,CAAC2C,SAAF,KAAgBN,CAAC,SAAxB;AACD;AACF,mBAJY,CAAb;;AAKA,sBAAIC,IAAI,KAAKhE,SAAb,EAAwB;AACtB,wBAAI8D,KAAK,KAAK,KAAd,EAAqB;AACnB,4BAAI,CAAChD,aAAL,GAAqBqD,KAAK,CAACtC,QAAN,EAArB;AACAiC,2BAAK,GAAG,IAAR;AACD;AACF,mBALD,MAKO,IAAIA,KAAK,KAAK,KAAd,EAAqB;AAC1B,0BAAI,CAAChD,aAAL,GAAqB,IAArB;AACD;AACF,iBAdD;AAeD;;AAEDwD,oBAAM,CAACC,IAAP,CAAY,KAAKvD,MAAjB,EAAyBS,GAAzB,CAA6B,UAAA0B,CAAC,EAAI;AAChC,oBAAMG,WAAW,GAAG,MAAI,CAACjD,GAAL,CAASkD,cAAT,CAAwB,MAAI,CAACvC,MAAL,CAAYmC,CAAZ,IAAiB,GAAjB,GAAuB,MAAI,CAACK,EAApD,CAApB;;AACA,oBAAMQ,IAAI,GAAGL,KAAK,CAACM,IAAN,CAAW,UAAAvC,CAAC;AAAA,yBAAIA,CAAC,CAACmC,QAAF,KAAeV,CAAnB;AAAA,iBAAZ,CAAb;;AACA,oBAAIa,IAAI,KAAKhE,SAAT,IAAsBmD,CAAC,KAAKa,IAAI,CAACH,QAArC,EAA+C;AAC7C,wBAAI,CAAC3D,CAAL,CAAOuD,QAAP,CAAgBH,WAAhB,EAA6B,QAA7B;AACD,iBAFD,MAEO;AACL,wBAAI,CAACpD,CAAL,CAAOwD,WAAP,CAAmBJ,WAAnB,EAAgC,QAAhC;AACD;AACF,eARD;AAUA,mBAAKkB,UAAL,GAAkB,KAAKnE,GAAL,CAASoE,iBAAT,CAA2B,WAA3B,CAAlB;AACA,mBAAK/D,QAAL,GAAgB,KAAKL,GAAL,CAASoE,iBAAT,CAA2B,UAA3B,CAAhB;AACA,mBAAKhE,QAAL,GAAgB,KAAKJ,GAAL,CAASoE,iBAAT,CAA2B,UAA3B,EAAuCC,OAAvC,CAA+C,IAA/C,EAAqD,EAArD,CAAhB;AACA,mBAAKC,SAAL,GAAiB,KAAKtE,GAAL,CAASoE,iBAAT,CAA2B,WAA3B,CAAjB;AACD;AAED;;;;AA1PK;AAAA;AAAA,mBA6PL,qBAAY;AACV,kBAAIG,GAAG,GAAG,YAAV;AACA,kBAAMC,SAAS,GAAG,KAAK1E,aAAL,CAAmB2E,cAArC;;AACA,kBAAID,SAAS,IAAIA,SAAS,CAACE,uBAAV,CAAkCC,aAAlC,CAAgDnB,QAAhD,KAA6D,GAA9E,EAAmF;AACjF,oBAAMoB,MAAM,GAAGJ,SAAS,CAACE,uBAAV,CAAkCC,aAAjD;;AACA,oBAAIC,MAAM,CAACC,IAAP,KAAgB,EAApB,EAAwB;AACtBN,qBAAG,GAAGK,MAAM,CAACC,IAAb;AACD;AACF;;AACDN,iBAAG,GAAGO,MAAM,CAAC,iBAAD,EAAoBP,GAApB,CAAZ;;AACA,kBAAIA,GAAG,IAAIA,GAAG,KAAK,EAAf,IAAqBA,GAAG,KAAK,UAAjC,EAA6C;AAC3C,qBAAKzE,aAAL,CAAmBiF,UAAnB,CAA8BR,GAA9B;AACD;AACF;AAED;;;;AA5QK;AAAA;AAAA,mBA+QL,uBAAc;AACZ,mBAAKtD,OAAL,CAAa0B,IAAb,CAAkB,EAAlB;AACA,kBAAM4B,GAAG,GAAGO,MAAM,CAAC,mBAAD,aAAlB;;AACA,kBAAIP,GAAG,IAAIA,GAAG,KAAK,EAAf,IAAqBA,GAAG,eAA5B,EAA6C;AAC3C,qBAAKzE,aAAL,CAAmBkF,WAAnB,CAA+BT,GAA/B;AACD;AACF;AAED;;AAvRK;AAAA;AAAA,mBAwRL,qBAAYU,KAAZ,EAA2BC,KAA3B,EAA0C;AACxC,mBAAKpF,aAAL,CAAmBqF,WAAnB,CAA+BF,KAA/B,EAAsCC,KAAtC;AACA,mBAAKjE,OAAL,CAAa0B,IAAb,CAAkB,EAAlB;AACD;AAED;;;;;AA7RK;AAAA;AAAA,mBAiSL,qBAAYyC,SAAZ,EAA6B;AAC3B,mBAAKtF,aAAL,CAAmBuF,WAAnB,CAA+BD,SAA/B;AACA,mBAAKnE,OAAL,CAAa0B,IAAb,CAAkB,EAAlB;AACD;AAED;;;;;AAtSK;AAAA;AAAA,mBA0SL,qBAAYtC,QAAZ,EAA4B;AAC1B,mBAAKP,aAAL,CAAmBwF,WAAnB,CAA+BjF,QAA/B;AACA,mBAAKY,OAAL,CAAa0B,IAAb,CAAkB,EAAlB;AACD;AAED;;;;;AA/SK;AAAA;AAAA,mBAmTL,uBAAc4C,CAAd,EAA0B;AACxB,kBAAMC,sBAAsB,GAAG,KAAKxF,GAAL,CAASkD,cAAT,CAAwB,qBAAqB,GAArB,GAA2B,KAAKC,EAAxD,CAA/B;;AACA,kBAAIoC,CAAJ,EAAO;AACL,qBAAK1F,CAAL,CAAOuD,QAAP,CAAgBoC,sBAAhB,EAAwC,QAAxC;AACD,eAFD,MAEO;AACL,qBAAK3F,CAAL,CAAOwD,WAAP,CAAmBmC,sBAAnB,EAA2C,QAA3C;AACD;;AACD,mBAAKvF,QAAL,GAAgBsF,CAAhB;AACD;AAED;;;;AA7TK;AAAA;AAAA,mBAgUL,uBAAcE,KAAd,EAAqB;AAAA;;AACnB,kBAAMC,IAAI,GAAGD,KAAK,CAACE,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAb;;AACA,kBAAIF,IAAI,CAACG,IAAL,CAAUC,QAAV,CAAmB,QAAnB,CAAJ,EAAkC;AAC9B,oBAAI,KAAKC,MAAT,EAAiB;AACf,uBAAKA,MAAL,CAAYL,IAAZ,EAAkBM,SAAlB,CAA4B;AAAA,2BAAM,MAAI,CAACC,gBAAX;AAAA,mBAA5B;AACD,iBAFD,MAEO,IAAI,KAAKC,SAAT,EAAoB;AACvB,uBAAKpG,aAAL,CAAmBqG,WAAnB,CAA+BT,IAA/B,EAAqCM,SAArC,CAA+C;AAAA,2BAAM,MAAI,CAACC,gBAAX;AAAA,mBAA/C;AACH,iBAFM,MAEA;AACL,sBAAMG,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,wBAAM,CAACE,MAAP,GAAgB,UAACxD,CAAD,EAAsB;AACpC,wBAAMyD,EAAE,GAAGzD,CAAC,CAAC0D,aAAb;;AACA,0BAAI,CAAC1G,aAAL,CAAmB2G,WAAnB,CAA+BF,EAAE,CAACxD,MAAH,CAAUvB,QAAV,EAA/B;AACD,mBAHD;;AAIA4E,wBAAM,CAACM,aAAP,CAAqBhB,IAArB;AACD;AACF;AACJ;AAhVI;AAAA;AAAA,mBAkVL,0BAAiBiB,QAAjB,EAA6DlB,KAA7D,EAAoE;AAClE,kBAAQmB,QAAR,GAAqBD,QAAQ,CAACE,IAA9B,CAAQD,QAAR;AACA,mBAAK9G,aAAL,CAAmB2G,WAAnB,CAA+BG,QAA/B;AACAnB,mBAAK,CAACqB,UAAN,CAAiBpH,KAAjB,GAAyB,IAAzB;AACD;AAED;;;;AAxVK;AAAA;AAAA,mBA2VL,wBAAeqH,OAAf,EAAgC;AAC9B,kBAAIA,OAAO,KAAK,IAAhB,EAAsB;AACpB,qBAAK9F,OAAL,CAAa0B,IAAb,CAAkB,OAAlB;AACD,eAFD,MAEO;AACL,qBAAK7C,aAAL,CAAmBkH,iBAAnB,CAAqC,KAAK7F,cAAL,CAAoB,CAAC4F,OAArB,CAArC;AACD;AACF;AAjWI;AAAA;AAAA,mBAmWL,wBAAexF,IAAf,EAA2B;AACzB,kBAAI,CAACA,IAAL,EAAW;AACT,uBAAO,KAAP;AACD;;AACD,kBAAI,EAAE,KAAK0F,aAAL,YAA8BC,KAAhC,CAAJ,EAA4C;AAC1C,uBAAO,KAAP;AACD;;AACD,kBAAInE,MAAJ;;AAPyB,yDAQP,KAAKkE,aARE;AAAA;;AAAA;AAQzB,oEAAsC;AAAA,sBAA3BE,GAA2B;;AACpC,sBAAIA,GAAG,YAAYD,KAAnB,EAA0B;AACxBnE,0BAAM,GAAGoE,GAAG,CAACvD,IAAJ,CAAS,UAAAwD,IAAI;AAAA,6BAAIA,IAAI,KAAK7F,IAAb;AAAA,qBAAb,CAAT;AACD;;AACD,sBAAIwB,MAAJ,EAAY;AACV;AACD;AACF;AAfwB;AAAA;AAAA;AAAA;AAAA;;AAgBzB,qBAAOA,MAAM,KAAKpD,SAAlB;AACD;AApXI;AAAA;AAAA,mBAsXL,iBAAQ;AACN,mBAAKsB,OAAL,CAAa0B,IAAb,CAAkB,OAAlB;AACA0E,qBAAO,CAACC,GAAR,CAAY,SAAZ;AACD;AAzXI;AAAA;AAAA,mBA2XL,yBAAgB;AACd,mBAAKnC,WAAL,CAAiB,KAAKtD,OAAL,CAAaC,aAAb,CAA2BpC,KAA5C,EAAmD,WAAnD;AACD;AA7XI;AAAA;AAAA,mBA+XL,2BAAkB;AAChB,mBAAKkC,WAAL,CAAiB2F,IAAjB;AACD;AAjYI;;AAAA;AAAA;;;2BAAM3H,6B,EAA6B,wH,EAAA,6I,EAAA,yH,EAAA,gEAoJ9B,wDApJ8B,C;AAoJtB,S;;;gBApJPA,6B;AAA6B,iD;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpB1C;;;;AAAqC;;;;;;;ODoB9B;;;;;;;;;;;;;;;;;AEpBP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;ACSI;;AAGM;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AACA;;AACN;;;;;;;;;AAHM;;AAEA;;AAAA;;;;;;AAEN;;AAAoD;;AAAmB;;;;;;;;;;ADoBpE;AAAA,YAAM4H,iBAAN;AA0BL,qCAAoBC,KAApB,EACoB5H,CADpB,EACgC;AAAA;;AADZ,iBAAA4H,KAAA,GAAAA,KAAA;AACA,iBAAA5H,CAAA,GAAAA,CAAA;AA1BX,iBAAA6H,OAAA,GAA0B,EAA1B;AAKT,iBAAAC,QAAA,GAAW,KAAX;AACA,iBAAAC,QAAA,GAAW,CAAX;AAMA,iBAAAC,MAAA,GAAS,KAAT;AAM8B,iBAAAC,MAAA,GAAS,cAAT,CAQE,CANhC;;AACkB,iBAAAC,WAAA,GAAc,IAAI,0DAAJ,EAAd;;AAsElB,iBAAA5F,QAAA,GAAgB,YAAM,CACrB,CADD;;AAEA,iBAAA6F,SAAA,GAAiB,YAAM,CACtB,CADD;AAlEI;;AA5BC;AAAA;AAAA,iBASL,eAAS;AACP,qBAAO,KAAKC,cAAL,IAAuB,KAAKA,cAAL,CAAoBC,cAApB,CAAmC,OAAnC,CAAvB,GAAqE,KAAKD,cAAL,CAAoB1H,KAAzF,GAAiG,QAAxG;AACD;AAXI;AAAA;AAAA,iBAeL,eAAS;AACP,qBAAO,KAAK0H,cAAL,CAAoBvI,KAA3B;AACD;AAjBI;AAAA;AAAA,mBA8BL,oBAAW;AACT,mBAAKuI,cAAL,GAAsB,KAAKP,OAAL,CAAa,CAAb,CAAtB;;AACA,kBAAI,yDAAU,KAAKS,QAAf,KAA4B,KAAKA,QAArC,EAA+C;AAC7C,qBAAKC,IAAL;AACD;AACF;AAnCI;AAAA;AAAA,mBAqCL,gBAAO;AACL,mBAAKN,MAAL,GAAc,MAAd;AACD;AAvCI;AAAA;AAAA,mBAyCL,sBAAaO,MAAb,EAAmC5C,KAAnC,EAAsD;AACpDA,mBAAK,CAAC6C,eAAN;AACA,mBAAKC,QAAL,CAAcF,MAAM,CAAC3I,KAArB;AACA,mBAAKyC,QAAL,CAAc,KAAK8F,cAAL,CAAoBvI,KAAlC;AACA,mBAAKqI,WAAL,CAAiBpF,IAAjB,CAAsB,KAAKsF,cAAL,CAAoBvI,KAA1C;AACA,mBAAKsI,SAAL;AACA,mBAAKH,MAAL,GAAc,KAAd;AACD;AAhDI;AAAA;AAAA,mBAkDL,oBAAWpC,KAAX,EAA8B;AAC5B;AACA,kBAAI,KAAKkC,QAAT,EAAmB;AACjB;AACD;;AACD,mBAAKE,MAAL,GAAc,CAAC,KAAKA,MAApB;AACD;AAxDI;AAAA;AAAA,mBA2DL,iBAAQW,MAAR,EAA4B;AAC1B,kBAAI,CAAC,KAAKf,KAAL,CAAW3F,aAAX,CAAyB2G,QAAzB,CAAkCD,MAAM,CAAC7C,MAAzC,CAAL,EAAuD;AACrD,qBAAK+C,KAAL;AACD;AACF;AA/DI;AAAA;AAAA,mBAiEL,iBAAQ;AACN,mBAAKb,MAAL,GAAc,KAAd;AACD;AAnEI;AAAA;AAAA,iBAqEL,eAAU;AACR,qBAAO,KAAKA,MAAZ;AACD;AAvEI;AAAA;AAAA,mBAyEL,oBAAWnI,KAAX,EAAkB;AAChB,kBAAI,CAACA,KAAD,IAAU,OAAOA,KAAP,KAAiB,QAA/B,EAAyC;AACvC;AACD;;AACD,mBAAK6I,QAAL,CAAc7I,KAAd;AACD;AA9EI;AAAA;AAAA,mBAgFL,kBAASA,KAAT,EAAgB;AACd,kBAAIoE,KAAK,GAAG,CAAZ;AACA,kBAAM6E,UAAU,GAAG,KAAKjB,OAAL,CAAa9D,IAAb,CAAkB,UAACgF,EAAD,EAAKtH,CAAL,EAAW;AAC9CwC,qBAAK,GAAGxC,CAAR;AACA,uBAAOsH,EAAE,CAAClJ,KAAH,KAAaA,KAApB;AACD,eAHkB,CAAnB;;AAIA,kBAAIiJ,UAAJ,EAAgB;AACd,qBAAKV,cAAL,GAAsBU,UAAtB;AACA,qBAAKf,QAAL,GAAgB9D,KAAhB;AACD;AACF;AA1FI;AAAA;AAAA,mBAiGL,0BAAiB+E,EAAjB,EAAqB;AACnB,mBAAK1G,QAAL,GAAgB0G,EAAhB;AACD;AAnGI;AAAA;AAAA,mBAqGL,2BAAkBA,EAAlB,EAAsB;AACpB,mBAAKb,SAAL,GAAiBa,EAAjB;AACD;AAvGI;AAAA;AAAA,mBAyGL,0BAAiBC,UAAjB,EAAoC;AAClC,mBAAKC,WAAL,CAAiBjH,aAAjB,CAA+B6F,QAA/B,GAA0CmB,UAA1C;AACA,kBAAME,GAAG,GAAG,KAAKD,WAAL,CAAiBjH,aAA7B;AACA,kBAAMmH,MAAM,GAAGH,UAAU,GAAG,UAAH,GAAgB,aAAzC;AACA,mBAAKjJ,CAAL,CAAOoJ,MAAP,EAAeD,GAAf,EAAoB,UAApB;AACA,mBAAKrB,QAAL,GAAgBmB,UAAhB;AACD;AA/GI;AAAA;AAAA,mBAkHL,uBAAcN,MAAd,EAAqC;AACnC,kBAAI,CAAC,KAAKX,MAAV,EAAkB;AAChB;AACD,eAHkC,CAInC;AACA;;;AACA,sBAAQW,MAAM,CAACU,GAAf;AACE,qBAAK,WAAL;AACE,uBAAKC,gBAAL,CAAsBX,MAAtB;;AACA;;AACF,qBAAK,SAAL;AACE,uBAAKY,cAAL,CAAoBZ,MAApB;;AACA;;AACF,qBAAK,OAAL;AACE,uBAAKa,YAAL,CAAkBb,MAAlB;;AACA;;AACF,qBAAK,OAAL;AACE,uBAAKc,YAAL,CAAkBd,MAAlB;;AACA;;AACF,qBAAK,KAAL;AACE,uBAAKe,UAAL,CAAgBf,MAAhB;;AACA;;AACF,qBAAK,QAAL;AACE,uBAAKE,KAAL;AACAF,wBAAM,CAACgB,cAAP;AACA;;AACF,qBAAK,WAAL;AACE,uBAAKC,gBAAL;;AACA;AAtBJ,eANmC,CA8BnC;AACA;AACA;;AACD;AAnJI;AAAA;AAAA,mBAqJL,0BAAiBjB,MAAjB,EAAyB;AACvB,kBAAI,KAAKZ,QAAL,GAAgB,KAAKF,OAAL,CAAagC,MAAb,GAAsB,CAA1C,EAA6C;AAC3C,qBAAK9B,QAAL;AACD;AACF;AAzJI;AAAA;AAAA,mBA2JL,wBAAeY,MAAf,EAAuB;AACrB,kBAAI,KAAKZ,QAAL,IAAiB,CAArB,EAAwB;AACtB,qBAAKA,QAAL;AACD;AACF;AA/JI;AAAA;AAAA,mBAiKL,sBAAaY,MAAb,EAAqB,CAEpB;AAnKI;AAAA;AAAA,mBAqKL,sBAAaA,MAAb,EAAqB;AACnB,mBAAKmB,YAAL,CAAkB,KAAKjC,OAAL,CAAa,KAAKE,QAAlB,CAAlB,EAA+CY,MAA/C;AACD;AAvKI;AAAA;AAAA,mBAyKL,oBAAWA,MAAX,EAAmB,CAElB;AA3KI;AAAA;AAAA,mBA6KL,4BAAmB,CAElB;AA/KI;;AAAA;AAAA;;;2BAAMhB,iB,EAAiB,yH,EAAA,wH;AAAA,S;;;gBAAjBA,iB;AAAiB,oC;AAAA;AAAA;;;;;;;;;;;;;;uBAAjB,mB;AAAe,e,EAAA,K,EAAA,+D,EAAA,S,EAAA;AAAA,uBAAf,yBAAe;AAAM,e;;;;;;;;;;;;;;sFARrB,CACT;AACEoC,mBAAO,EAAE,gEADX;AAEEC,uBAAW,EAAE,iEAAW;AAAA,qBAAMrC,iBAAN;AAAA,aAAX,CAFf;AAGEsC,iBAAK,EAAE;AAHT,WADS,C;AAMV,mB;AAAA,iB;AAAA,inB;AAAA;AAAA;ACjCH;;AACE;;AAAsG;AAAA,uBAAS,IAAAC,UAAA,QAAT;AAA2B,eAA3B;;AAA8B;;AAClI;;AAAA;;AAEE;;AACA;;AACF;;AACF;;AACA;;AAAA;;AACE;;AAMA;;AACF;;AACF;;;;AAjBgC;;AACtB;;AAAA;;AAA4H;;AAAA;;AAS3G;;AAAA;;AAKM;;AAAA;;;;;;;;ODoB1B;;;;;;;;;;;;;;;;;AEnCP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,UAAI,sEAAYC,UAAhB,EAA4B;AAC1B;AACD;;AAED,kFAAyBC,eAAzB,CAAyC,yDAAzC,WACS,UAAAC,GAAG;AAAA,eAAI7C,OAAO,CAAC8C,KAAR,CAAcD,GAAd,CAAJ;AAAA,OADZ;;;;;;;;;;;;;;;;;ACVA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAcO;AAAA,YAAME,mBAAN;AAAA;AAAA;;;2BAAMA,mB;AAAmB,S;;;gBAAnBA;;;oBANF,CACP,4DADO,EACO,0DADP,EACoB,kEADpB,C;;;OAMJ;;;4HAAMA,mB,EAAmB;AAAA,yBAHf,gFAGe,EAHS,+FAGT,EAHwC,gFAGxC;AAHyD,oBAFrF,4DAEqF,EAFvE,0DAEuE,EAF1D,kEAE0D,CAGzD;AALkB,oBAGtC,gFAHsC,EAGd,+FAHc;AAKlB,S;AAFiC,O;;;;;;;;;;;;;;;;;ACZjE;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAuBO;AAAA,YAAMC,SAAN;AAAA;AAAA;;;2BAAMA,S;AAAS,S;;;gBAATA,S;AAAS,sBAFR,2DAEQ;;;qBAHT,E;AAAE,oBAPJ,CACP,uEADO,EAEP,iGAFO,EAGP,qEAHO,EAIP,0DAJO,EAKP,kEALO,CAOI;;;OAGR;;;4HAAMA,S,EAAS;AAAA,yBAZlB,2DAYkB;AAZN,oBAGZ,uEAHY,EAIZ,iGAJY,EAKZ,qEALY,EAMZ,0DANY,EAOZ,kEAPY;AAYM,S;AALC,O;;;;;;;;;;;;;;;;;AClBvB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;;;ACMK;;AAYK;AAAA;;AAAA;;AAAA;AAAA;;AACJ;;;;;;AAVI,oFAAS,WAAT,EAAS,uBAAT,EAAS,QAAT,EAAS,oBAAT,EAAS,aAAT,EAAS,0EAAT,EAAS,OAAT,EAAS,iBAAT,EAAS,eAAT,EAAS,2BAAT,EAAS,iBAAT,EAAS,6BAAT,EAAS,iBAAT,EAAS,6BAAT,EAAS,eAAT,EAAS,kCAAT;;;;;;;;AAsCL;;AAYK;AAAA;;AAAA;;AAAA;AAAA;;AACJ;;;;;;AAVI,oFAAS,WAAT,EAAS,uBAAT,EAAS,QAAT,EAAS,oBAAT,EAAS,aAAT,EAAS,0EAAT,EAAS,OAAT,EAAS,iBAAT,EAAS,eAAT,EAAS,2BAAT,EAAS,iBAAT,EAAS,6BAAT,EAAS,iBAAT,EAAS,6BAAT,EAAS,eAAT,EAAS,kCAAT;;;;ADVH;AAAA,YAAMC,sBAAN;AA2CL,0CACUzK,CADV,EAEUC,aAFV,EAG4BE,GAH5B,EAIUuK,SAJV,EAKUC,KALV,EAMyBC,eANzB,EAOkCC,SAPlC,EAOgD;AAAA;;AANtC,iBAAA7K,CAAA,GAAAA,CAAA;AACA,iBAAAC,aAAA,GAAAA,aAAA;AACkB,iBAAAE,GAAA,GAAAA,GAAA;AAClB,iBAAAuK,SAAA,GAAAA,SAAA;AACA,iBAAAC,KAAA,GAAAA,KAAA;AAEwB,iBAAAE,SAAA,GAAAA,SAAA;AA7ClC,iBAAAC,UAAA,GAAa,IAAb;AACA,iBAAAC,eAAA,GAAkB,KAAlB;AACA,iBAAAjD,QAAA,GAAW,KAAX;AACA,iBAAAkD,OAAA,GAAU,KAAV;AACA,iBAAAC,OAAA,GAAU,KAAV;AACA,iBAAAC,OAAA,GAAU,KAAV;AAKS,iBAAA5H,EAAA,GAAK,EAAL;AACA,iBAAA6H,MAAA,GAA8B,2DAA9B;AACA,iBAAAC,WAAA,GAAc,EAAd;AASC,iBAAAC,QAAA,GAAW,IAAI,0DAAJ,EAAX;AAEV;AACE;;AACc,iBAAAC,SAAA,GAAsC,IAAI,0DAAJ,EAAtC;AAEhB;AACE;;AACe,iBAAAC,UAAA,GAAuC,IAAI,0DAAJ,EAAvC;AAEa,iBAAAC,QAAA,GAAW,CAAC,CAAZ;AAgB5B,gBAAMC,cAAc,GAAGC,MAAM,CAACd,eAAD,CAA7B;AACA,iBAAKe,QAAL,GAAiBF,cAAc,IAAIA,cAAc,KAAK,CAAtC,GAA2CA,cAA3C,GAA4D,IAA5E;AACD;;AAtDI;AAAA;AAAA,mBAuCL,mBAAU;AACR,mBAAKG,KAAL;AACD;AAzCI;AAAA;AAAA,mBAwDL,oBAAW;AACT,mBAAKT,MAAL,CAAYU,eAAZ,GAA8B,KAAKV,MAAL,CAAYU,eAAZ,GAA8B,KAAKV,MAAL,CAAYU,eAA1C,GAA4D,4DAAoBA,eAA9G;AACD;AA1DI;AAAA;AAAA,mBA4DL,2BAAkB;AAChB,kBAAI,yDAAU,KAAKhB,SAAf,CAAJ,EAA+B;AAC7B,qBAAKe,KAAL;AACD;AACF;AAhEI;AAAA;AAAA,mBAkEL,iBAAQhG,KAAR,EAA6B;AAC3B,kBAAI,KAAKuF,MAAL,CAAYW,QAAhB,EAA0B;AACxBlG,qBAAK,CAAC+D,cAAN;AACA,oBAAMoC,IAAI,GAAGnG,KAAK,CAACoG,aAAN,CAAoBC,OAApB,CAA4B,YAA5B,CAAb;AACAC,wBAAQ,CAACC,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0CJ,IAA1C;AACA,uBAAOA,IAAP;AACD;AACF;AAED;;;;;AA3EK;AAAA;AAAA,mBA+EL,wBAAelJ,OAAf,EAAgC;AAC9B,mBAAK+I,KAAL;;AACA,kBAAI/I,OAAO,KAAK,OAAhB,EAAyB;AACvB;AACD;;AACD,kBAAIA,OAAO,KAAK,kBAAhB,EAAoC;AAClC,qBAAKuJ,gBAAL,CAAsB,KAAKtB,UAA3B;AACD,eAFD,MAEO,IAAIjI,OAAO,KAAK,EAAhB,EAAoB;AACzB,oBAAIA,OAAO,KAAK,OAAhB,EAAyB;AACvB,uBAAK5C,aAAL,CAAmBoM,sBAAnB,CAA0C,KAAKC,aAAL,EAA1C;AACA,uBAAKC,eAAL,CAAqB,KAAKC,QAAL,CAAcvK,aAAnC;AACD,iBAHD,MAGO,IAAIY,OAAO,KAAK,SAAhB,EAA2B;AAChC,uBAAK5C,aAAL,CAAmBoM,sBAAnB,CAA0C,yBAA1C;AACA,uBAAKE,eAAL,CAAqB,KAAKC,QAAL,CAAcvK,aAAnC;AACD,iBAHM,MAGA;AACL,uBAAKhC,aAAL,CAAmBwM,cAAnB,CAAkC5J,OAAlC;AACD;;AACD,qBAAK6J,IAAL;AACD;AACF;AAED;;;;AApGK;AAAA;AAAA,mBAuGL,yBAAgB9G,KAAhB,EAAiC;AAAA;;AAC/B,kBAAI,KAAKoF,OAAT,EAAkB;AAChBpF,qBAAK,CAAC6C,eAAN;AACA;AACD;;AACD,mBAAKuC,OAAL,GAAe,IAAf;AACA,mBAAKO,UAAL,CAAgBzI,IAAhB,CAAqB8C,KAArB;;AACA,kBAAI,CAAC,KAAKqF,OAAN,IAAiB,CAAC,KAAKC,OAA3B,EAAoC;AAClC,qBAAKjL,aAAL,CAAmB0M,2BAAnB,CAA+C,YAAM;AACnD,wBAAI,CAACC,SAAL;;AACA,wBAAI,CAAC3B,OAAL,GAAe,IAAf;AACD,iBAHD;AAID;AACF;AAED;;;;AAtHK;AAAA;AAAA,mBAyHE,4BAAmBrF,KAAnB,EAAoC;AACzC,mBAAK3F,aAAL,CAAmB4M,aAAnB;AACD;AAED;;;;AA7HK;AAAA;AAAA,mBAgIL,wBAAejH,KAAf,EAAkC;AAChC;;;AAGA,mBAAK3F,aAAL,CAAmB0M,2BAAnB,CAA+C,KAAK1M,aAAL,CAAmB4M,aAAlE;;AAEA,kBAAI,OAAO,KAAK1E,SAAZ,KAA0B,UAA9B,EAA0C;AACxC,qBAAKA,SAAL;AACD;;AAED,kBAAIvC,KAAK,CAACkH,aAAN,KAAwB,IAA5B,EAAkC;AAChC,oBAAM/H,MAAM,GAAIa,KAAK,CAACkH,aAAN,CAAoChI,aAApD;;AACA,oBAAI,CAACC,MAAM,CAACgI,SAAP,CAAiBnE,QAAjB,CAA0B,4BAA1B,CAAD,IAA4D,CAAC7D,MAAM,CAACgI,SAAP,CAAiBnE,QAAjB,CAA0B,WAA1B,CAAjE,EAAyG;AACvG,uBAAK0C,SAAL,CAAexI,IAAf,CAAoB8C,KAApB;AACA,uBAAKoF,OAAL,GAAe,KAAf;AACD;AACF;AACF;AAED;;;;AAnJK;AAAA;AAAA,mBAsJL,iBAAQ;AACN,kBAAI,KAAKF,UAAT,EAAqB;AACnB,qBAAK0B,QAAL,CAAcvK,aAAd,CAA4B2J,KAA5B;AACD,eAFD,MAEO;AACL,oBAAMoB,UAAU,GAAG,KAAK7M,GAAL,CAASkD,cAAT,CAAwB,eAAe,KAAKC,EAA5C,CAAnB;AACA0J,0BAAU,CAACpB,KAAX;AACA,qBAAKZ,OAAL,GAAe,IAAf;AACD;AACF;AAED;;;;;AAhKK;AAAA;AAAA,mBAoKL,yBAAgBiC,OAAhB,EAAoC;AAClC,kBAAIC,IAAI,GAAG,EAAX;;AACA,kBAAI,KAAKpC,UAAT,EAAqB;AACnBoC,oBAAI,GAAGD,OAAO,CAACE,SAAf;AACD,eAFD,MAEO;AACLD,oBAAI,GAAGD,OAAO,CAACG,SAAf;AACD;;AACD,kBAAK,CAACF,IAAD,IAASA,IAAI,KAAK,MAAvB,EAAgC;AAC9BA,oBAAI,GAAG,EAAP;AACD;;AACD,kBAAI,OAAO,KAAK5K,QAAZ,KAAyB,UAA7B,EAAyC;AACvC,qBAAKA,QAAL,CAAc,KAAK6I,MAAL,CAAYkC,QAAZ,IAAwB,KAAKlC,MAAL,CAAYkC,QAAZ,KAAyBvN,SAAjD,GACZ,KAAK4K,SAAL,CAAe2C,QAAf,CAAwB,8DAAgBC,IAAxC,EAA8CJ,IAA9C,CADY,GAC0CA,IADxD;;AAEA,oBAAK,CAACA,IAAF,KAAY,KAAKnC,eAArB,EAAsC;AACpC,uBAAKwC,iBAAL,CAAuB,KAAKxC,eAA5B;AACD;AACF;;AACD,mBAAKG,OAAL,GAAe,IAAf;AACD;AAED;;;;;;;AAxLK;AAAA;AAAA,mBA8LL,0BAAiBlC,EAAjB,EAAwB;AACtB,mBAAK1G,QAAL,GAAgB,UAAAW,CAAC;AAAA,uBAAKA,CAAC,KAAK,MAAN,GAAe+F,EAAE,CAAC,EAAD,CAAjB,GAAwBA,EAAE,CAAC/F,CAAD,CAA/B;AAAA,eAAjB;AACD;AAED;;;;;;;AAlMK;AAAA;AAAA,mBAwML,2BAAkB+F,EAAlB,EAAyB;AACvB,mBAAKb,SAAL,GAAiBa,EAAjB;AACD;AAED;;;;;;AA5MK;AAAA;AAAA,mBAiNL,oBAAWnJ,KAAX,EAAqB;AAEnB,kBAAI,CAAC,CAACA,KAAD,IAAUA,KAAK,KAAK,MAApB,IAA8BA,KAAK,KAAK,EAAzC,MAAiD,KAAKkL,eAA1D,EAA2E;AACzE,qBAAKwC,iBAAL,CAAuB,KAAKxC,eAA5B;AACD;;AAED,kBAAIlL,KAAK,KAAKC,SAAV,IAAuBD,KAAK,KAAK,EAAjC,IAAuCA,KAAK,KAAK,MAArD,EAA6D;AAC3DA,qBAAK,GAAG,IAAR;AACD;;AAED,mBAAK2N,WAAL,CAAiB3N,KAAjB;AACD;AAED;;;;;;AA9NK;AAAA;AAAA,mBAmOL,qBAAYA,KAAZ,EAAyB;AACvB,kBAAM4N,eAAe,GAAG5N,KAAK,KAAK,IAAV,GAAiB,EAAjB,GAAsBA,KAA9C;AACA,mBAAKG,CAAL,CAAO0N,WAAP,CAAmB,KAAKlB,QAAL,CAAcvK,aAAjC,EAAgD,WAAhD,EAA6DwL,eAA7D;AAEA;AACD;AAED;;;;;;AA1OK;AAAA;AAAA,mBA+OL,2BAAkB5N,KAAlB,EAAgC;AAC9B,kBAAI,CAACA,KAAL,EAAY;AACV,qBAAKG,CAAL,CAAOuD,QAAP,CAAgB,KAAKoK,aAAL,CAAmB1L,aAAnC,EAAkD,kBAAlD;AACA,qBAAK8I,eAAL,GAAuB,IAAvB;AAED,eAJD,MAIO;AACL,qBAAK/K,CAAL,CAAOwD,WAAP,CAAmB,KAAKmK,aAAL,CAAmB1L,aAAtC,EAAqD,kBAArD;AACA,qBAAK8I,eAAL,GAAuB,KAAvB;AACD;AACF;AAED;;;;;;AA1PK;AAAA;AAAA,mBA+PL,0BAAiB9B,UAAjB,EAAoC;AAClC,kBAAME,GAAG,GAAG,KAAKqD,QAAL,CAAcvK,aAA1B;AACA,kBAAMmH,MAAM,GAAGH,UAAU,GAAG,UAAH,GAAgB,aAAzC;AACA,mBAAKjJ,CAAL,CAAOoJ,MAAP,EAAeD,GAAf,EAAoB,UAApB;AACA,mBAAKrB,QAAL,GAAgBmB,UAAhB;AACD;AAED;;;;;;AAtQK;AAAA;AAAA,mBA2QL,0BAAiB2E,SAAjB,EAAqC;AAAA;;AACnC,kBAAIC,QAAJ;AACA,kBAAMC,eAAe,GAAG,KAAKtB,QAAL,CAAcvK,aAAtC;;AAEA,kBAAI2L,SAAJ,EAAe;AACbC,wBAAQ,GAAG,KAAK7N,CAAL,CAAO+N,UAAP,CAAkBD,eAAe,CAACX,SAAlC,CAAX;AACA,qBAAKnN,CAAL,CAAO0N,WAAP,CAAmBI,eAAnB,EAAoC,WAApC,EAAiD,EAAjD;AACA,qBAAK9N,CAAL,CAAO0N,WAAP,CAAmBI,eAAnB,EAAoC,iBAApC,EAAuD,KAAvD;AAEA,oBAAME,IAAI,GAAG,KAAKhO,CAAL,CAAOiO,aAAP,CAAqB,KAArB,CAAb;AACA,qBAAKjO,CAAL,CAAOkO,QAAP,CAAgBF,IAAhB,EAAsB,QAAtB,EAAgC,GAAhC;AACA,qBAAKhO,CAAL,CAAOkO,QAAP,CAAgBF,IAAhB,EAAsB,SAAtB,EAAiC,MAAjC;AAEA,oBAAMG,KAAK,GAAG,KAAKnO,CAAL,CAAOiO,aAAP,CAAqB,MAArB,CAAd;AACA,qBAAKjO,CAAL,CAAO0N,WAAP,CAAmBS,KAAnB,EAA0B,IAA1B,EAAgC,eAAe,KAAK7K,EAApD;AACA,qBAAKtD,CAAL,CAAOkO,QAAP,CAAgBC,KAAhB,EAAuB,SAAvB,EAAkC,OAAlC;AACA,qBAAKnO,CAAL,CAAOkO,QAAP,CAAgBC,KAAhB,EAAuB,aAAvB,EAAsC,UAAtC;AACA,qBAAKnO,CAAL,CAAOkO,QAAP,CAAgBC,KAAhB,EAAuB,YAAvB,EAAqC,UAArC;AACA,qBAAKnO,CAAL,CAAOkO,QAAP,CAAgBC,KAAhB,EAAuB,SAAvB,EAAkC,MAAlC;AACA,qBAAKnO,CAAL,CAAOkO,QAAP,CAAgBC,KAAhB,EAAuB,QAAvB,EAAiC,GAAjC;AACA,qBAAKnO,CAAL,CAAOkO,QAAP,CAAgBC,KAAhB,EAAuB,kBAAvB,EAA2C,SAA3C;AACA,qBAAKnO,CAAL,CAAO0N,WAAP,CAAmBS,KAAnB,EAA0B,iBAA1B,EAA6C,IAA7C;AACA,qBAAKnO,CAAL,CAAOoO,WAAP,CAAmBD,KAAnB,EAA0BN,QAA1B;AACA,qBAAKQ,aAAL,GAAqB,KAAKrO,CAAL,CAAOsO,MAAP,CAAcH,KAAd,EAAqB,OAArB,EAA8B,UAACvI,KAAD;AAAA,yBAAW,MAAI,CAAC2I,eAAL,CAAqB3I,KAArB,CAAX;AAAA,iBAA9B,CAArB;AACA,qBAAK4I,YAAL,GAAoB,KAAKxO,CAAL,CAAOsO,MAAP,CAAcH,KAAd,EAAqB,MAArB,EAA6B,UAACvI,KAAD;AAAA,yBAAW,MAAI,CAAC6I,cAAL,CAAoB7I,KAApB,CAAX;AAAA,iBAA7B,CAApB;AACA,qBAAK5F,CAAL,CAAOoO,WAAP,CAAmBJ,IAAnB,EAAyBG,KAAzB;AACA,qBAAKnO,CAAL,CAAOoO,WAAP,CAAmBN,eAAnB,EAAoCE,IAApC,EAtBa,CAwBb;;AACA,qBAAK7N,GAAL,CAASgM,WAAT,CAAqB,2BAArB,EAAkD,KAAlD,EAAyD,KAAzD;AAEA,qBAAKrB,UAAL,GAAkB,KAAlB;AACA,qBAAKO,QAAL,CAAcvI,IAAd,CAAmB,KAAnB;AACAqL,qBAAK,CAACvC,KAAN;AACD,eA9BD,MA8BO;AACL,oBAAI,KAAKzL,GAAL,CAASuO,gBAAb,EAA+B;AAC7B,uBAAK1O,CAAL,CAAO0N,WAAP,CAAmBI,eAAnB,EAAoC,WAApC,EAAiDA,eAAe,CAACV,SAAjE;AACD,iBAFD,MAEO;AACLS,0BAAQ,GAAG,KAAK1N,GAAL,CAASwO,WAAT,EAAX;AACAd,0BAAQ,CAACe,kBAAT,CAA4Bd,eAAe,CAACe,UAA5C;AACA,uBAAK7O,CAAL,CAAO0N,WAAP,CAAmBI,eAAnB,EAAoC,WAApC,EAAiDD,QAAQ,CAAClM,QAAT,EAAjD;AACD;;AACD,qBAAK3B,CAAL,CAAO0N,WAAP,CAAmBI,eAAnB,EAAoC,iBAApC,EAAuD,IAAvD;AACA,qBAAKhD,UAAL,GAAkB,IAAlB;AACA,qBAAKO,QAAL,CAAcvI,IAAd,CAAmB,IAAnB;AACA,qBAAKyJ,eAAL,CAAqBuB,eAArB;AACAA,+BAAe,CAAClC,KAAhB;AACD;;AACD,mBAAKkD,aAAL,CAAmBC,aAAnB,CAAiC,CAAC,KAAKjE,UAAvC;AACD;AAED;;;;;;AA9TK;AAAA;AAAA,mBAmUL,gBAAO;AACL,mBAAKgE,aAAL,CAAmBE,cAAnB;AAEA,kBAAIC,aAAJ;;AACA,kBAAI,KAAK9O,GAAL,CAAS+O,YAAb,EAA2B;AACzBD,6BAAa,GAAG,KAAK9O,GAAL,CAAS+O,YAAT,EAAhB;AACA,qBAAKjP,aAAL,CAAmB0M,2BAAnB,CAA+C,KAAK1M,aAAL,CAAmB4M,aAAlE;AACD;;AAED,kBAAIsC,CAAC,GAAGF,aAAa,CAACG,SAAtB;AACA,kBAAMC,GAAG,GAAG,EAAZ;;AACA,qBAAOF,CAAC,IAAIA,CAAC,CAAC7L,EAAF,KAAS,QAArB,EAA+B;AAC7B+L,mBAAG,CAACzN,OAAJ,CAAYuN,CAAZ;AACAA,iBAAC,GAAGA,CAAC,CAACG,UAAN;AACD;;AACD,mBAAKR,aAAL,CAAmBS,aAAnB,CAAiCF,GAAjC;AACD;AAnVI;AAAA;AAAA,mBAqVG,qBAAY;AAClB,mBAAKpP,aAAL,CAAmBoG,SAAnB,GAA+B,KAAK8E,MAAL,CAAY9E,SAA3C;AACA,mBAAKpG,aAAL,CAAmBuP,qBAAnB,GAA2C,KAAKrE,MAAL,CAAYqE,qBAAvD;;AACA,kBAAI,KAAKrE,MAAL,CAAYsE,yBAAhB,EAA2C;AACzC,qBAAKxP,aAAL,CAAmByP,4BAAnB,CAAgD,KAAKvE,MAAL,CAAYsE,yBAA5D;AACD;;AACD,kBAAI,KAAKtE,MAAL,CAAYwE,eAAhB,EAAiC;AAC/B,qBAAK1P,aAAL,CAAmBuF,WAAnB,CAA+B,KAAK2F,MAAL,CAAYwE,eAA3C;AACD;;AACD,kBAAI,KAAKxE,MAAL,CAAYyE,eAAhB,EAAiC;AAC/B,qBAAK3P,aAAL,CAAmBwF,WAAnB,CAA+B,KAAK0F,MAAL,CAAYyE,eAA3C;AACD;AACF;AAjWI;AAAA;AAAA,mBAmWL,oBAAW;AACT,kBAAMzO,KAAK,GAAG,KAAKgK,MAAL,CAAYhK,KAAZ,GAAoB,KAAKgK,MAAL,CAAYhK,KAAhC,GAAwC,4DAAoBA,KAA1E;AACA,qBAAOA,KAAK,CAACI,GAAN,CAAU,UAAAC,CAAC,EAAI;AACpB,uBAAO;AAACd,uBAAK,EAAEc,CAAC,CAACE,IAAV;AAAgB7B,uBAAK,EAAE2B,CAAC,CAACE;AAAzB,iBAAP;AACD,eAFM,CAAP;AAGD;AAxWI;AAAA;AAAA,mBA0WL,yBAAgB;AACd,kBAAMmO,IAAI,GAAG,CAAC,MAAD,CAAb;AACA,mBAAK1E,MAAL,CAAY2E,aAAZ,CAA0B9M,OAA1B,CAAkC,UAAAxB,CAAC,EAAI;AACrC,oBAAIA,CAAC,CAACuO,GAAF,KAAUjQ,SAAd,EAAyB;AACvB,sBAAI,CAAC+P,IAAI,CAAC5J,QAAL,CAAczE,CAAC,CAACuO,GAAhB,CAAL,EAA2B;AACzBF,wBAAI,CAACG,IAAL,CAAUxO,CAAC,CAACuO,GAAZ;AACD;AACF;AACF,eAND;AAOA,qBAAOF,IAAI,CAACI,IAAL,CAAU,GAAV,CAAP;AACD;AApXI;AAAA;AAAA,mBAsXL,uBAAc;AACZ,kBAAI,KAAKzB,YAAT,EAAuB;AACrB,qBAAKA,YAAL;AACD;;AACD,kBAAI,KAAKH,aAAT,EAAwB;AACtB,qBAAKA,aAAL;AACD;AACF;AA7XI;AAAA;AAAA,mBA+XL,sBAAanB,IAAb,EAAyB;AACvBA,kBAAI,GAAGA,IAAI,CAAC1I,OAAL,CAAa,kBAAb,EAAiC,EAAjC,CAAP;AACA,qBAAO0I,IAAP;AACD;AAlYI;;AAAA;AAAA;;;2BAAMzC,sB,EAAsB,wH,EAAA,6I,EAAA,gEA8CvB,wDA9CuB,C,EA8Cf,uI,EAAA,gI,EAAA,gEAGL,UAHK,C,EAGK,gEACV,WADU,C;AACC,S;;;gBAlDbA,sB;AAAsB,yC;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;uBAAtB,a;AAAS,e;;;;;;;;;;;;;;;;;;;sFATT,CACT;AACEV,mBAAO,EAAE,gEADX;AAEEC,uBAAW,EAAE,iEAAW;AAAA,qBAAMS,sBAAN;AAAA,aAAX,CAFf;AAGER,iBAAK,EAAE;AAHT,WADS,EAMT,4EANS,C;AAOV,mB;AAAA,kB;AAAA,ykB;AAAA;AAAA;ACtCH;;AAMK;;AAeA;;AAIK;;AAWK;AAAA,uBAAS,IAAAsC,eAAA,eAAT;AAAuC,eAAvC,EAAwC,OAAxC,EAAwC;AAAA,uBAC/B,IAAAgC,eAAA,QAD+B;AACR,eADhC,EAAwC,MAAxC,EAAwC;AAAA,uBAEhC,IAAAE,cAAA,QAFgC;AAEV,eAF9B,EAAwC,OAAxC,EAAwC;AAAA,uBAG/B,IAAA/B,IAAA,EAH+B;AAGzB,eAHf,EAAwC,OAAxC,EAAwC;AAAA,uBAI/B,IAAAA,IAAA,EAJ+B;AAIzB,eAJf,EAAwC,UAAxC,EAAwC;AAAA,uBAK5B,IAAAwD,kBAAA,QAL4B;AAKF,eALtC,EAAwC,OAAxC,EAAwC;AAAA,uBAM/B,IAAAC,OAAA,QAN+B;AAMhB,eANxB;;AAQL;;AACA;;AAAyC;;AAA0C;;AACxF;;AACA;;AAcL;;;;AA1DK,mGAA4B,WAA5B,EAA4B,mBAA5B;;AAIM;;AAAA;;AAyBI;;AAAA,qGAA8B,YAA9B,EAA8B,oBAA9B,EAA8B,YAA9B,EAA8B,oBAA9B,EAA8B,SAA9B,EAA8B,iDAA9B;;AAJA,gHAAwC,UAAxC,EAAwC,gCAAxC,EAAwC,WAAxC,EAAwC,oBAAxC,EAAwC,YAAxC,EAAwC,qBAAxC;;AAiBoC;;AAAA;;AAGxC;;AAAA;;;;;;;ODRJ;;;;;;;;;;;;;;;AExCP,eAASC,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,eAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,cAAIvN,CAAC,GAAG,IAAIwN,KAAJ,CAAU,yBAAyBJ,GAAzB,GAA+B,GAAzC,CAAR;AACApN,WAAC,CAACyN,IAAF,GAAS,kBAAT;AACA,gBAAMzN,CAAN;AACA,SAJM,CAAP;AAKA;;AACDmN,8BAAwB,CAAC/L,IAAzB,GAAgC,YAAW;AAAE,eAAO,EAAP;AAAY,OAAzD;;AACA+L,8BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAO,YAAM,CAACC,OAAP,GAAiBR,wBAAjB;AACAA,8BAAwB,CAAC9M,EAAzB,GAA8B,MAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAWO;AAAA,YAAMuN,oBAAN;AAOL,wCACUC,IADV,EAE4B3Q,GAF5B,EAEoC;AAAA;;AAAA;;AAD1B,iBAAA2Q,IAAA,GAAAA,IAAA;AACkB,iBAAA3Q,GAAA,GAAAA,GAAA;AA2E5B;;;;AAGO,iBAAA0M,aAAA,GAAgB,YAAY;AACjC,kBAAI,MAAI,CAAC1M,GAAL,CAAS+O,YAAb,EAA2B;AACzB,oBAAM6B,GAAG,GAAG,MAAI,CAAC5Q,GAAL,CAAS+O,YAAT,EAAZ;;AACA,oBAAI6B,GAAG,CAACC,UAAJ,IAAkBD,GAAG,CAACE,UAA1B,EAAsC;AACpC,wBAAI,CAACrM,cAAL,GAAsBmM,GAAG,CAACC,UAAJ,CAAe,CAAf,CAAtB;AACA,wBAAI,CAAClP,YAAL,GAAoBiP,GAAG,CAACpP,QAAJ,EAApB;AACD;AACF,eAND,MAMO,IAAI,MAAI,CAACxB,GAAL,CAAS+O,YAAT,IAAyB,MAAI,CAAC/O,GAAL,CAASwO,WAAtC,EAAmD;AACxD,sBAAI,CAAC/J,cAAL,GAAsBsH,QAAQ,CAACyC,WAAT,EAAtB;AACD,eAFM,MAEA;AACL,sBAAI,CAAC/J,cAAL,GAAsB,IAAtB;AACD;AACF,aAZM;AA7EF;AAEL;;;;;;AAZK;AAAA;AAAA,mBAgBL,wBAAe/B,OAAf,EAAgC;AAC9B,kBAAMqO,QAAQ,GAAG,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,GAArC,EAA0C,KAA1C,CAAjB;;AACA,kBAAIA,QAAQ,CAACjL,QAAT,CAAkBpD,OAAlB,CAAJ,EAAgC;AAC9B,qBAAK1C,GAAL,CAASgM,WAAT,CAAqB,aAArB,EAAoC,KAApC,EAA2CtJ,OAA3C;AACA;AACD;;AACD,mBAAK1C,GAAL,CAASgM,WAAT,CAAqBtJ,OAArB,EAA8B,KAA9B,EAAqC,IAArC;AACD;AAED;;;;;AAzBK;AAAA;AAAA,mBA6BL,oBAAW6B,GAAX,EAAwB;AACtB,kBAAI,CAACA,GAAG,CAACuB,QAAJ,CAAa,MAAb,CAAL,EAA2B;AACzB,qBAAK9F,GAAL,CAASgM,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0CzH,GAA1C;AACD,eAFD,MAEO;AACL,oBAAMyM,MAAM,GAAG,cAAczM,GAAd,GAAoB,oBAApB,GAA2C,KAAK5C,YAAhD,GAA+D,MAA9E;AACA,qBAAKsP,UAAL,CAAgBD,MAAhB;AACD;AACF;AAED;;;;;;;AAtCK;AAAA;AAAA,mBA4CL,qBAAY/L,KAAZ,EAA2BC,KAA3B,EAAwC;AACtC,kBAAMgM,QAAQ,GAAG,KAAKC,gBAAL,EAAjB;;AACA,kBAAID,QAAJ,EAAc;AACZ,oBAAIhM,KAAK,KAAK,WAAd,EAA2B;AACzB,uBAAKlF,GAAL,CAASgM,WAAT,CAAqB,WAArB,EAAkC,KAAlC,EAAyC/G,KAAzC;AACD,iBAFD,MAEO;AACL,uBAAKjF,GAAL,CAASgM,WAAT,CAAqB,aAArB,EAAoC,KAApC,EAA2C/G,KAA3C;AACD;AACF;AACF;AAED;;;;;AAvDK;AAAA;AAAA,mBA2DL,qBAAY7E,QAAZ,EAA8B;AAC5B,mBAAKJ,GAAL,CAASgM,WAAT,CAAqB,UAArB,EAAiC,KAAjC,EAAwC5L,QAAxC;AACD;AAED;;;;;AA/DK;AAAA;AAAA,mBAmEL,qBAAYC,QAAZ,EAA8B;AAC5B,mBAAKL,GAAL,CAASgM,WAAT,CAAqB,UAArB,EAAiC,KAAjC,EAAwC3L,QAAxC;AACD;AAED;;;;;AAvEK;AAAA;AAAA,mBA2EL,oBAAW0M,IAAX,EAAuB;AAErB,kBAAMqE,cAAc,GAAG,KAAKpR,GAAL,CAASgM,WAAT,CAAqB,YAArB,EAAmC,KAAnC,EAA0Ce,IAA1C,CAAvB;;AAEA,kBAAI,CAACqE,cAAL,EAAqB;AACnB,sBAAM,IAAId,KAAJ,CAAU,iCAAV,CAAN;AACD;AACF;AAmBD;;;;;;AArGK;AAAA;AAAA,mBA0GL,4BAAgB;AACd,kBAAI,KAAK7L,cAAT,EAAyB;AACvB,oBAAI,KAAKzE,GAAL,CAAS+O,YAAb,EAA2B;AACzB,sBAAM6B,GAAG,GAAG,KAAK5Q,GAAL,CAAS+O,YAAT,EAAZ;AACA6B,qBAAG,CAACS,eAAJ;AACAT,qBAAG,CAACU,QAAJ,CAAa,KAAK7M,cAAlB;AACA,yBAAO,IAAP;AACD,iBALD,MAKO,IAAI,KAAKzE,GAAL,CAAS+O;AAAa;AAA1B,kBAA6D;AAClE;AACA,2BAAO,IAAP;AACD;AACF,eAVD,MAUO;AACL,uBAAO,KAAP;AACD;AACF;AAED;;;;AA1HK;AAAA;AAAA,mBA6HE,qCAA4BwC,UAA5B,EAA8E;AAAA,kBAAbC,OAAa,uEAAH,GAAG;AACnFC,wBAAU,CAACF,UAAD,EAAaC,OAAb,CAAV;AACD;AAED;;AAjIK;AAAA;AAAA,mBAkIG,0BAAc;AAEpB,kBAAM7P,YAAY,GAAG,KAAK8C,cAAL,CAAoBjD,QAApB,EAArB;;AAEA,kBAAIG,YAAY,CAAC+H,MAAb,KAAwB,CAA5B,EAA+B;AAC7B,sBAAM,IAAI4G,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACD,qBAAO,IAAP;AACD;AAED;;;;;AA5IK;AAAA;AAAA,mBAgJL,qBAAY5K,IAAZ,EAAsB;AAEpB,kBAAMgM,UAAU,GAAa,IAAIC,QAAJ,EAA7B;AAEAD,wBAAU,CAACE,MAAX,CAAkB,MAAlB,EAA0BlM,IAA1B,EAAgCA,IAAI,CAACnE,IAArC;AAEA,qBAAO,KAAKoP,IAAL,CAAUkB,IAAV,CAA+B,KAAK3L,SAApC,EAA+CwL,UAA/C,EAA2D;AAChEI,8BAAc,EAAE,IADgD;AAEhEC,uBAAO,EAAE,QAFuD;AAGhEC,+BAAe,EAAE,KAAK3C;AAH0C,eAA3D,CAAP;AAKD;AAED;;;;;AA7JK;AAAA;AAAA,mBAiKL,qBAAYzI,QAAZ,EAA8B;AAC5B,mBAAK5G,GAAL,CAASgM,WAAT,CAAqB,aAArB,EAAoC,KAApC,EAA2CpF,QAA3C;AACD;AAnKI;AAAA;AAAA,mBAqKL,sCAA6BqL,SAA7B,EAAgD;AAC9C,mBAAKjS,GAAL,CAASgM,WAAT,CAAqB,2BAArB,EAAkD,KAAlD,EAAyDiG,SAAzD;AACD;AAvKI;AAAA;AAAA,mBAyKL,2BAAkBC,WAAlB,EAA4C;AAC1C,kBAAIC,MAAM,GAAG,KAAKxQ,YAAlB;;AACA,kBAAIuQ,WAAJ,EAAiB;AACf,oBAAME,OAAO,GAAGF,WAAW,CAACtC,GAAZ,GAAkBsC,WAAW,CAACtC,GAA9B,GAAoC,MAApD;AACAuC,sBAAM,GAAG,MAAMC,OAAN,GAAgB,UAAhB,GAA6BF,WAAW,SAAxC,GAAiD,IAAjD,GAAwD,KAAKvQ,YAA7D,GAA4E,IAA5E,GAAmFyQ,OAAnF,GAA6F,GAAtG;AACD;;AACD,mBAAKnB,UAAL,CAAgBkB,MAAhB;AACD;AAhLI;AAAA;AAAA,mBAkLL,qBAAYE,QAAZ,EAA8B;AAC5B,kBAAIA,QAAQ,CAACC,KAAT,CAAe,iBAAf,CAAJ,EAAuC;AACrC,qBAAKC,qBAAL,CAA2BF,QAA3B;AACD;;AACD,kBAAIA,QAAQ,CAACC,KAAT,CAAe,WAAf,CAAJ,EAAiC;AAC/B,qBAAKE,mBAAL,CAAyBH,QAAzB;AACD;AACF;AAzLI;AAAA;AAAA,mBA2LG,+BAAsBA,QAAtB,EAAsC;AAC5C,kBAAMlP,EAAE,GAAGkP,QAAQ,CAACI,KAAT,CAAe,IAAf,EAAqB,CAArB,CAAX;AACA,kBAAM7L,QAAQ,wCAAiCzD,EAAjC,WAAd;AACA,kBAAMuP,SAAS,wEAEAL,QAFA,sDAGGzL,QAHH,2MAAf;AAQA,mBAAKqK,UAAL,CAAgByB,SAAhB;AACD;AAvMI;AAAA;AAAA,mBAyMG,6BAAoBL,QAApB,EAAoC;AAAA;;AAC1C,kBAAMM,GAAG,GAAG,KAAKhC,IAAL,CAAUiC,GAAV,iDAA4DP,QAA5D,GAAwErM,SAAxE,CAAkF,UAAA6M,IAAI,EAAI;AACpG,oBAAMjM,QAAQ,GAAGiM,IAAI,CAACC,8BAAtB;AACA,oBAAMJ,SAAS,qCACFL,QADE,sDAECzL,QAFD,sBAEmBiM,IAAI,CAACE,KAFxB,qCAAf;;AAKA,sBAAI,CAAC9B,UAAL,CAAgByB,SAAhB;;AACAC,mBAAG,CAACK,WAAJ;AACD,eATW,CAAZ;AAUD;AApNI;AAAA;AAAA,mBAsNL,kBAASrP,IAAT,EAAe;AACb,kBAAIA,IAAI,CAACsP,aAAL,EAAJ,EAA0B;AACxB,uBAAOtP,IAAI,CAAC+K,UAAZ;AACD,eAFD,MAEO;AACL,uBAAO/K,IAAI,IAAI,CAACA,IAAI,CAACuP,WAArB,EAAkC;AAChCvP,sBAAI,GAAGA,IAAI,CAACwL,UAAZ;AACD;;AACD,oBAAI,CAACxL,IAAL,EAAW;AACT,yBAAO,IAAP;AACD;;AACD,uBAAOA,IAAI,CAACuP,WAAZ;AACD;AACF;AAlOI;AAAA;AAAA,mBAoOL,+BAAsBC,KAAtB,EAA6BC,kCAA7B,EAAiE;AAC/D,kBAAIzP,IAAI,GAAGwP,KAAK,CAACE,cAAjB;AACA,kBAAMC,OAAO,GAAGH,KAAK,CAACI,YAAtB;AACA,kBAAIC,UAAU,GAAG,EAAjB,CAH+D,CAK/D;;AACA,kBAAI7P,IAAI,KAAK2P,OAAb,EAAsB;AACpBE,0BAAU,GAAG,CAAC7P,IAAD,CAAb;AACD,eAFD,MAEO;AACL;AACA,uBAAOA,IAAI,IAAIA,IAAI,KAAK2P,OAAxB,EAAiC;AAC/BE,4BAAU,CAAC3D,IAAX,CAAiBlM,IAAI,GAAG,KAAK8P,QAAL,CAAc9P,IAAd,CAAxB;AACD,iBAJI,CAML;;;AACAA,oBAAI,GAAGwP,KAAK,CAACE,cAAb;;AACA,uBAAO1P,IAAI,IAAIA,IAAI,KAAKwP,KAAK,CAACzO,uBAA9B,EAAuD;AACrD8O,4BAAU,CAAC/R,OAAX,CAAmBkC,IAAnB;AACAA,sBAAI,GAAGA,IAAI,CAACwL,UAAZ;AACD;AACF,eApB8D,CAsB/D;;;AACA,kBAAIiE,kCAAJ,EAAwC;AACtCzP,oBAAI,GAAGwP,KAAK,CAACzO,uBAAb;;AACA,uBAAOf,IAAP,EAAa;AACX6P,4BAAU,CAAC3D,IAAX,CAAgBlM,IAAhB;AACAA,sBAAI,GAAGA,IAAI,CAACwL,UAAZ;AACD;AACF;;AAED,qBAAOqE,UAAP;AACD;AApQI;AAAA;AAAA,mBAsQL,4BAAmB;AACjB,kBAAMlQ,KAAK,GAAG,EAAd;;AACA,kBAAI,KAAKtD,GAAL,CAAS+O,YAAb,EAA2B;AACzB,oBAAM6B,GAAG,GAAG,KAAK5Q,GAAL,CAAS+O,YAAT,EAAZ;;AACA,qBAAK,IAAIzN,CAAC,GAAG,CAAR,EAAWoS,GAAG,GAAG9C,GAAG,CAACE,UAA1B,EAAsCxP,CAAC,GAAGoS,GAA1C,EAA+C,EAAEpS,CAAjD,EAAoD;AAClDgC,uBAAK,CAACuM,IAAN,CAAW8D,KAAX,CAAiBrQ,KAAjB,EAAwB,KAAKsQ,qBAAL,CAA2BhD,GAAG,CAACC,UAAJ,CAAevP,CAAf,CAA3B,EAA8C,IAA9C,CAAxB;AACD;AACF;;AACD,qBAAOgC,KAAP;AACD;AA/QI;AAAA;AAAA,mBAiRL,gCAAuBsF,EAAvB,EAA2B;AACzB,kBAAMhE,MAAM,GAAGgE,EAAE,CAACuG,UAAlB;;AACA,qBAAOvG,EAAE,CAACqK,aAAH,EAAP,EAA2B;AACzBrO,sBAAM,CAACiP,YAAP,CAAoBjL,EAAE,CAAC8F,UAAvB,EAAmC9F,EAAnC;AACD;;AACDhE,oBAAM,CAACkP,WAAP,CAAmBlL,EAAnB;AACD;AAvRI;AAAA;AAAA,mBAyRL,gCAAuBmL,QAAvB,EAAiC;AAAA;;AAC/B,kBAAMC,aAAa,GAAGD,QAAQ,CAAClQ,WAAT,GAAuB4O,KAAvB,CAA6B,GAA7B,CAAtB;AACA,mBAAKwB,gBAAL,GAAwBpR,OAAxB,CAAgC,UAACc,IAAD,EAAU;AACxC,oBAAIA,IAAI,CAACuQ,QAAL,KAAkB,CAAlB,IACFF,aAAa,CAACG,OAAd,CAAsBxQ,IAAI,CAACyO,OAAL,CAAavO,WAAb,EAAtB,IAAoD,CAAC,CADvD,EAC0D;AACxD;AACA,wBAAI,CAACuQ,sBAAL,CAA4BzQ,IAA5B;AACD;AACF,eAND;AAOD;AAlSI;;AAAA;AAAA;;;2BAAM+M,oB,EAAoB,uH,EAAA,uDASrB,wDATqB,C;AASb,S;;;iBATPA,oB;AAAoB,mBAApBA,oBAAoB;;;OAA1B;;;;;;;;;;;;;;;;;ACXP;AAAA;;;AAAA;AAAA;AAAA,S,CAAA;AACA;AACA;;;AAEO,UAAM2D,WAAW,GAAG;AACzBrK,kBAAU,EAAE;AADa,OAApB;AAIP;;;;;;;AAOA;;;;;;;;;;;;;;;;;AC2BA;AAAA;;;AAAA;AAAA;AAAA;;AAAO,UAAMsK,mBAAmB,GAAwB;AACtDC,gBAAQ,EAAE,IAD4C;AAEtDC,kBAAU,EAAE,IAF0C;AAGtDtS,cAAM,EAAE,MAH8C;AAItDuS,iBAAS,EAAE,GAJ2C;AAKtDC,iBAAS,EAAE,MAL2C;AAMtDC,aAAK,EAAE,MAN+C;AAOtDC,gBAAQ,EAAE,GAP4C;AAQtDC,iBAAS,EAAE,KAR2C;AAStDC,qBAAa,EAAE,IATuC;AAUtDlS,mBAAW,EAAE,IAVyC;AAWtDqI,mBAAW,EAAE,oBAXyC;AAYtDqE,iCAAyB,EAAE,EAZ2B;AAatDE,uBAAe,EAAE,EAbqC;AActDC,uBAAe,EAAE,EAdqC;AAetDzO,aAAK,EAAE,CACL;AAAC,mBAAO,OAAR;AAAiBO,cAAI,EAAE;AAAvB,SADK,EAEL;AAAC,mBAAO,iBAAR;AAA2BA,cAAI,EAAE;AAAjC,SAFK,EAGL;AAAC,mBAAO,SAAR;AAAmBA,cAAI,EAAE;AAAzB,SAHK,EAIL;AAAC,mBAAO,eAAR;AAAyBA,cAAI,EAAE;AAA/B,SAJK,CAf+C;AAqBtD2E,iBAAS,EAAE,UArB2C;AAsBtDmJ,6BAAqB,EAAE,KAtB+B;AAuBtDnC,gBAAQ,EAAE,IAvB4C;AAwBtDxB,uBAAe,EAAE,KAxBqC;AAyBtDqJ,eAAO,EAAE;AAzB6C,OAAjD;;;;;;;;;;;;;;;;AC1CP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AASO;AAAA,YAAMC,YAAN;AAwEL,gCAAoBC,WAApB,EAA8C;AAAA;;AAA1B,iBAAAA,WAAA,GAAAA,WAAA;AAvEpB,iBAAAlC,KAAA,GAAQ,KAAR;AAIA,iBAAAmC,YAAA,GAAe,EAAf;AACA,iBAAAC,YAAA,GAAe,EAAf;AAEA,iBAAAC,OAAA,GAA+B;AAC7Bb,sBAAQ,EAAE,IADmB;AAE7BC,wBAAU,EAAE,IAFiB;AAG7BC,uBAAS,EAAE,MAHkB;AAI7BC,uBAAS,EAAE,OAJkB;AAK7BzJ,yBAAW,EAAE,oBALgB;AAM7B4J,uBAAS,EAAE,IANkB;AAO7B3H,sBAAQ,EAAE,KAPmB;AAQ7B;AACA6H,qBAAO,EAAE,IAToB;AAU7BvF,6BAAe,EAAE,eAVY;AAW7BC,6BAAe,EAAE,GAXY;AAY7B;AACAH,uCAAyB,EAAE,GAbE;AAc7BK,2BAAa,EAAE,CACb;AACEpO,oBAAI,EAAE,OADR;AAEE,yBAAO;AAFT,eADa,EAKb;AACEA,oBAAI,EAAE,SADR;AAEE,yBAAO;AAFT,eALa,EASb;AACEA,oBAAI,EAAE,WADR;AAEE,yBAAO,WAFT;AAGEqO,mBAAG,EAAE;AAHP,eATa,CAdc;AA6B7ByF,kCAAoB,EAAE,CACpB,CAAC,MAAD,EAAS,QAAT,CADoB,EAEpB,CAAC,UAAD,CAFoB;AA7BO,aAA/B;AAmCA,iBAAAC,OAAA,GAA+B;AAC7Bf,sBAAQ,EAAE,IADmB;AAE7BC,wBAAU,EAAE,IAFiB;AAG7BC,uBAAS,EAAE,MAHkB;AAI7BC,uBAAS,EAAE,OAJkB;AAK7BzJ,yBAAW,EAAE,oBALgB;AAM7B4J,uBAAS,EAAE,IANkB;AAO7B3H,sBAAQ,EAAE,IAPmB;AAQ7BxB,6BAAe,EAAE,QARY;AAS7B8D,6BAAe,EAAE,eATY;AAU7BC,6BAAe,EAAE,GAVY;AAW7BH,uCAAyB,EAAE,GAXE;AAY7BK,2BAAa,EAAE,CACb;AACEpO,oBAAI,EAAE,OADR;AAEE,yBAAO;AAFT,eADa,EAKb;AACEA,oBAAI,EAAE,SADR;AAEE,yBAAO;AAFT,eALa,EASb;AACEA,oBAAI,EAAE,WADR;AAEE,yBAAO,WAFT;AAGEqO,mBAAG,EAAE;AAHP,eATa;AAZc,aAA/B;AA6BgD;;AAxE3C;AAAA;AAAA,mBA0EL,oBAAW;AACT,mBAAK2F,IAAL,GAAY,KAAKN,WAAL,CAAiBO,KAAjB,CAAuB;AACjCC,yBAAS,EAAE,CAAC,EAAD,EAAK,0DAAWC,QAAhB;AADsB,eAAvB,CAAZ;AAGArO,qBAAO,CAACC,GAAR,CAAY,KAAK4N,YAAjB;AACD;AA/EI;AAAA;AAAA,mBAiFL,kBAASzP,KAAT,EAAgB;AACd4B,qBAAO,CAACC,GAAR,CAAY,SAAZ;AACD;AAnFI;AAAA;AAAA,mBAqFL,gBAAO7B,KAAP,EAAc;AACZ4B,qBAAO,CAACC,GAAR,CAAY,UAAU7B,KAAtB;AACD;AAvFI;AAAA;AAAA,mBAyFL,mBAAUA,KAAV,EAAiB;AACf4B,qBAAO,CAACsO,IAAR,CAAa,KAAKJ,IAAL,CAAU7V,KAAvB;AACD;AA3FI;;AAAA;AAAA;;;2BAAMsV,Y,EAAY,2H;AAAA,S;;;gBAAZA,Y;AAAY,mC;AAAA,mB;AAAA,iB;AAAA,gV;AAAA;AAAA;ACTzB;;AACE;;AAAI;;AAAc;;AAClB;;AAAG;;AAAmD;;AAAW;;AAAI;;AAErE;;AAAwB;;AAAW;;AACnC;;AACA;;AAAI;;AACJ;;AAA6B;AAAA;AAAA,iBAA0B,eAA1B,EAA0B;AAAA,uBAAqC,IAAA7S,QAAA,QAArC;AAAqD,eAA/E,EAA0B,MAA1B,EAA0B;AAAA,uBAC/B,IAAAyT,MAAA,QAD+B;AACjB,eADT;;AACW;;AACxC;;AACE;;AACF;;AACA;;AACE;;AAA6F;AAAA,uBAAiB,IAAAC,SAAA,QAAjB;AAAkC,eAAlC;;AAAoC;;AACnI;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACF;;;;AAd+B;;AAAA,oGAA0B,QAA1B,EAA0B,WAA1B;;AAG3B;;AAAA;;AAEI;;AAAA;;AACsE;;AAAA;;AAG1E;;AAAA;;AAGA;;AAAA;;;;;;;ODVG","file":"main-es5.js","sourcesContent":["export function isDefined(value: any) {\n  return value !== undefined && value !== null;\n}\n","import { AfterViewChecked, AfterViewInit, Component, ElementRef, EventEmitter, Inject, Input, Output, Renderer2, ViewChild} from '@angular/core';\nimport {AngularEditorService, UploadResponse} from './angular-editor.service';\nimport {HttpResponse, HttpEvent} from '@angular/common/http';\nimport {DOCUMENT} from '@angular/common';\nimport {CustomClass} from './config';\nimport {SelectOption} from './ae-select/ae-select.component';\nimport { Observable } from 'rxjs';\n\nimport * as JSColor from '@eastdesire/jscolor';\n\ninterface ColorpickerInstance {\n  show: () => void;\n};\n\n@Component({\n  selector: 'angular-editor-toolbar',\n  templateUrl: './angular-editor-toolbar.component.html',\n  styleUrls: ['./angular-editor-toolbar.component.scss'],\n})\n\nexport class AngularEditorToolbarComponent implements AfterViewInit {\n  htmlMode = false;\n  linkSelected = false;\n  block = 'default';\n  fontName = 'Times New Roman';\n  fontSize = '3';\n  foreColour;\n  backColor;\n\n  headings: SelectOption[] = [\n    {\n      label: 'Heading 1',\n      value: 'h1',\n    },\n    {\n      label: 'Heading 2',\n      value: 'h2',\n    },\n    {\n      label: 'Heading 3',\n      value: 'h3',\n    },\n    {\n      label: 'Heading 4',\n      value: 'h4',\n    },\n    {\n      label: 'Heading 5',\n      value: 'h5',\n    },\n    {\n      label: 'Heading 6',\n      value: 'h6',\n    },\n    {\n      label: 'Heading 7',\n      value: 'h7',\n    },\n    {\n      label: 'Paragraph',\n      value: 'p',\n    },\n    {\n      label: 'Predefined',\n      value: 'pre'\n    },\n    {\n      label: 'Standard',\n      value: 'div'\n    },\n    {\n      label: 'default',\n      value: 'default'\n    }\n  ];\n\n  fontSizes: SelectOption[] = [\n    {\n      label: '1',\n      value: '1',\n    },\n    {\n      label: '2',\n      value: '2',\n    },\n    {\n      label: '3',\n      value: '3',\n    },\n    {\n      label: '4',\n      value: '4',\n    },\n    {\n      label: '5',\n      value: '5',\n    },\n    {\n      label: '6',\n      value: '6',\n    },\n    {\n      label: '7',\n      value: '7',\n    }\n  ];\n\n  customClassId = '-1';\n  // eslint-disable-next-line @typescript-eslint/naming-convention, no-underscore-dangle, id-blacklist, id-match\n  _customClasses: CustomClass[];\n  customClassList: SelectOption[] = [{label: '', value: ''}];\n  // uploadUrl: string;\n\n  tagMap = {\n    BLOCKQUOTE: 'indent',\n    A: 'link'\n  };\n\n  select = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'PRE', 'DIV'];\n\n  buttons = ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'justifyLeft', 'justifyCenter',\n    'justifyRight', 'justifyFull', 'indent', 'outdent', 'insertUnorderedList', 'insertOrderedList', 'link'];\n\n  @Input() id: string;\n  @Input() uploadUrl: string;\n  @Input() upload: (file: File) => Observable<HttpEvent<UploadResponse>>;\n  @Input() showToolbar: boolean;\n  @Input() fonts: SelectOption[] = [{label: '', value: ''}];\n\n  @Input()\n  set customClasses(classes: CustomClass[]) {\n    if (classes) {\n      this._customClasses = classes;\n      this.customClassList = this._customClasses.map((x, i) => ({label: x.name, value: i.toString()}));\n      this.customClassList.unshift({label: 'Clear Class', value: '-1'});\n    }\n  }\n\n  @Input()\n  set defaultFontName(value: string) {\n    if (value) {\n      this.fontName = value;\n    }\n  }\n\n  @Input()\n  set defaultFontSize(value: string) {\n    if (value) {\n      this.fontSize = value;\n    }\n  }\n\n  @Input() hiddenButtons: string[][];\n\n  @Output() execute: EventEmitter<string> = new EventEmitter<string>();\n\n  @ViewChild('fileInput', {static: true}) myInputFile: ElementRef;\n  @ViewChild('fgInput') fgInput: ElementRef;\n  private colorPicker: ColorpickerInstance;\n\n  public get isLinkButtonDisabled(): boolean {\n    return this.htmlMode || !Boolean(this.editorService.selectedText);\n  }\n\n  constructor(\n    private r: Renderer2,\n    private editorService: AngularEditorService,\n    private er: ElementRef,\n    @Inject(DOCUMENT) private doc: any\n  ) {\n  }\n\n  ngAfterViewInit() {\n    //jscolor.init();\n    //debugger;\n    this.colorPicker = new JSColor(this.fgInput.nativeElement, {\n      container: this.er.nativeElement,\n      closeButton: true,\n      format: 'hex',\n      height: 80,\n      onChange: this.updateFgColor.bind(this),\n      onUpdate: this.updateFgColor.bind(this),\n      palette: '#fff #808080 #000 #996e36 #f55525 #ffe438 #88dd20 #22e0cd #269aff #bb1cd4',\n      paletteCols: 11,\n      position: 'bottom',\n    });\n  }\n\n  /**\n   * Trigger command from editor header buttons\n   * @param command string from toolbar buttons\n   */\n  triggerCommand(command: string) {\n    this.execute.emit(command);\n  }\n\n  /**\n   * highlight editor buttons when cursor moved or positioning\n   */\n  triggerButtons() {\n    if (!this.showToolbar) {\n      return;\n    }\n    this.buttons.forEach(e => {\n      const result = this.doc.queryCommandState(e);\n      const elementById = this.doc.getElementById(e + '-' + this.id);\n      if (result) {\n        this.r.addClass(elementById, 'active');\n      } else {\n        this.r.removeClass(elementById, 'active');\n      }\n    });\n  }\n\n  /**\n   * trigger highlight editor buttons when cursor moved or positioning in block\n   */\n  triggerBlocks(nodes: Node[]) {\n    if (!this.showToolbar) {\n      return;\n    }\n    this.linkSelected = nodes.findIndex(x => x.nodeName === 'A') > -1;\n    let found = false;\n    this.select.forEach(y => {\n      const node = nodes.find(x => x.nodeName === y);\n      if (node !== undefined && y === node.nodeName) {\n        if (found === false) {\n          this.block = node.nodeName.toLowerCase();\n          found = true;\n        }\n      } else if (found === false) {\n        this.block = 'default';\n      }\n    });\n\n    found = false;\n    if (this._customClasses) {\n      this._customClasses.forEach((y, index) => {\n        const node = nodes.find(x => {\n          if (x instanceof Element) {\n            return x.className === y.class;\n          }\n        });\n        if (node !== undefined) {\n          if (found === false) {\n            this.customClassId = index.toString();\n            found = true;\n          }\n        } else if (found === false) {\n          this.customClassId = '-1';\n        }\n      });\n    }\n\n    Object.keys(this.tagMap).map(e => {\n      const elementById = this.doc.getElementById(this.tagMap[e] + '-' + this.id);\n      const node = nodes.find(x => x.nodeName === e);\n      if (node !== undefined && e === node.nodeName) {\n        this.r.addClass(elementById, 'active');\n      } else {\n        this.r.removeClass(elementById, 'active');\n      }\n    });\n\n    this.foreColour = this.doc.queryCommandValue('ForeColor');\n    this.fontSize = this.doc.queryCommandValue('FontSize');\n    this.fontName = this.doc.queryCommandValue('FontName').replace(/\"/g, '');\n    this.backColor = this.doc.queryCommandValue('backColor');\n  }\n\n  /**\n   * insert URL link\n   */\n  insertUrl() {\n    let url = 'https:\\/\\/';\n    const selection = this.editorService.savedSelection;\n    if (selection && selection.commonAncestorContainer.parentElement.nodeName === 'A') {\n      const parent = selection.commonAncestorContainer.parentElement as HTMLAnchorElement;\n      if (parent.href !== '') {\n        url = parent.href;\n      }\n    }\n    url = prompt('Insert URL link', url);\n    if (url && url !== '' && url !== 'https://') {\n      this.editorService.createLink(url);\n    }\n  }\n\n  /**\n   * insert Video link\n   */\n  insertVideo() {\n    this.execute.emit('');\n    const url = prompt('Insert Video link', `https://`);\n    if (url && url !== '' && url !== `https://`) {\n      this.editorService.insertVideo(url);\n    }\n  }\n\n  /** insert color */\n  insertColor(color: string, where: string) {\n    this.editorService.insertColor(color, where);\n    this.execute.emit('');\n  }\n\n  /**\n   * set font Name/family\n   * @param foreColor string\n   */\n  setFontName(foreColor: string): void {\n    this.editorService.setFontName(foreColor);\n    this.execute.emit('');\n  }\n\n  /**\n   * set font Size\n   * @param fontSize string\n   */\n  setFontSize(fontSize: string): void {\n    this.editorService.setFontSize(fontSize);\n    this.execute.emit('');\n  }\n\n  /**\n   * toggle editor mode (WYSIWYG or SOURCE)\n   * @param m boolean\n   */\n  setEditorMode(m: boolean) {\n    const toggleEditorModeButton = this.doc.getElementById('toggleEditorMode' + '-' + this.id);\n    if (m) {\n      this.r.addClass(toggleEditorModeButton, 'active');\n    } else {\n      this.r.removeClass(toggleEditorModeButton, 'active');\n    }\n    this.htmlMode = m;\n  }\n\n  /**\n   * Upload image when file is selected.\n   */\n  onFileChanged(event) {\n    const file = event.target.files[0];\n    if (file.type.includes('image/')) {\n        if (this.upload) {\n          this.upload(file).subscribe(() => this.watchUploadImage);\n        } else if (this.uploadUrl) {\n            this.editorService.uploadImage(file).subscribe(() => this.watchUploadImage);\n        } else {\n          const reader = new FileReader();\n          reader.onload = (e: ProgressEvent) => {\n            const fr = e.currentTarget as FileReader;\n            this.editorService.insertImage(fr.result.toString());\n          };\n          reader.readAsDataURL(file);\n        }\n      }\n  }\n\n  watchUploadImage(response: HttpResponse<{imageUrl: string}>, event) {\n    const { imageUrl } = response.body;\n    this.editorService.insertImage(imageUrl);\n    event.srcElement.value = null;\n  }\n\n  /**\n   * Set custom class\n   */\n  setCustomClass(classId: string) {\n    if (classId === '-1') {\n      this.execute.emit('clear');\n    } else {\n      this.editorService.createCustomClass(this._customClasses[+classId]);\n    }\n  }\n\n  isButtonHidden(name: string): boolean {\n    if (!name) {\n      return false;\n    }\n    if (!(this.hiddenButtons instanceof Array)) {\n      return false;\n    }\n    let result: any;\n    for (const arr of this.hiddenButtons) {\n      if (arr instanceof Array) {\n        result = arr.find(item => item === name);\n      }\n      if (result) {\n        break;\n      }\n    }\n    return result !== undefined;\n  }\n\n  focus() {\n    this.execute.emit('focus');\n    console.log('focused');\n  }\n\n  updateFgColor() {\n    this.insertColor(this.fgInput.nativeElement.value, 'textColor');\n  }\n\n  showColorPicker() {\n    this.colorPicker.show();\n  }\n}\n","<div class=\"angular-editor-toolbar\" *ngIf=\"showToolbar\">\n  <div class=\"angular-editor-toolbar-set\">\n    <button type=\"button\" title=\"Undo\" class=\"angular-editor-button\" (click)=\"triggerCommand('undo')\"\n            [hidden]=\"isButtonHidden('undo')\" tabindex=\"-1\"><i\n      class='fa fa-undo'></i></button>\n    <button type=\"button\" title=\"Redo\" class=\"angular-editor-button\" (click)=\"triggerCommand('redo')\"\n            [hidden]=\"isButtonHidden('redo')\" tabindex=\"-1\"><i\n      class='fa fa-repeat'></i></button>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <button [id]=\"'bold-'+id\" type=\"button\" title=\"Bold\" class=\"angular-editor-button\" (click)=\"triggerCommand('bold')\"\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('bold')\" tabindex=\"-1\"><i class='fa fa-bold'></i></button>\n    <button [id]=\"'italic-'+id\" type=\"button\" title=\"Italic\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('italic')\"\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('italic')\" tabindex=\"-1\"><i class='fa fa-italic'></i>\n    </button>\n    <button [id]=\"'underline-'+id\" type=\"button\" title=\"Underline\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('underline')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('underline')\"\n            tabindex=\"-1\"><i class='fa fa-underline'></i></button>\n    <button [id]=\"'strikeThrough-'+id\" type=\"button\" title=\"Strikethrough\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('strikeThrough')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('strikeThrough')\"\n            tabindex=\"-1\"><i class='fa fa-strikethrough'></i></button>\n    <button [id]=\"'subscript-'+id\" type=\"button\" title=\"Subscript\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('subscript')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('subscript')\"\n            tabindex=\"-1\"><i class='fa fa-subscript'></i></button>\n    <button [id]=\"'superscript-'+id\" type=\"button\" title=\"Superscript\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('superscript')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('superscript')\"\n            tabindex=\"-1\"><i class='fa fa-superscript'></i></button>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <button [id]=\"'justifyLeft-'+id\" type=\"button\" title=\"Justify Left\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('justifyLeft')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyLeft')\"\n            tabindex=\"-1\"><i\n      class='fa fa-align-left'></i></button>\n    <button [id]=\"'justifyCenter-'+id\" type=\"button\" title=\"Justify Center\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('justifyCenter')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyCenter')\"\n            tabindex=\"-1\"><i\n      class='fa fa-align-center'></i></button>\n    <button [id]=\"'justifyRight-'+id\" type=\"button\" title=\"Justify Right\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('justifyRight')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyRight')\"\n            tabindex=\"-1\">\n      <i class='fa fa-align-right'></i></button>\n    <button [id]=\"'justifyFull-'+id\" type=\"button\" title=\"Justify Full\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('justifyFull')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyFull')\"\n            tabindex=\"-1\"><i\n      class='fa fa-align-justify'></i></button>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <button [id]=\"'indent-'+id\" type=\"button\" title=\"Indent\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('indent')\"\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('indent')\" tabindex=\"-1\"><i\n      class='fa fa-indent'></i></button>\n    <button [id]=\"'outdent-'+id\" type=\"button\" title=\"Outdent\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('outdent')\"\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('outdent')\" tabindex=\"-1\"><i\n      class='fa fa-outdent'></i></button>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <button [id]=\"'insertUnorderedList-'+id\" type=\"button\" title=\"Unordered List\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('insertUnorderedList')\" [disabled]=\"htmlMode\"\n            [hidden]=\"isButtonHidden('insertUnorderedList')\" tabindex=\"-1\"><i\n      class='fa fa-list-ul'></i></button>\n    <button [id]=\"'insertOrderedList-'+id\" type=\"button\" title=\"Ordered List\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('insertOrderedList')\" [disabled]=\"htmlMode\"\n            [hidden]=\"isButtonHidden('insertOrderedList')\" tabindex=\"-1\"><i\n      class='fa fa-list-ol'></i></button>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n\n    <ae-select class=\"select-heading\" [options]=\"headings\"\n               [(ngModel)]=\"block\"\n               (change)=\"triggerCommand(block)\"\n               [disabled]=\"htmlMode\"\n               [hidden]=\"isButtonHidden('heading')\"\n               tabindex=\"-1\"></ae-select>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n\n    <ae-select class=\"select-font\" [options]=\"fonts\"\n               [(ngModel)]=\"fontName\"\n               (change)=\"setFontName(fontName)\"\n               [disabled]=\"htmlMode\"\n               [hidden]=\"isButtonHidden('fontName')\"\n               tabindex=\"-1\"></ae-select>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n\n    <ae-select class=\"select-font-size\" [options]=\"fontSizes\"\n               [(ngModel)]=\"fontSize\"\n               (change)=\"setFontSize(fontSize)\"\n               [disabled]=\"htmlMode\"\n               [hidden]=\"isButtonHidden('fontSize')\"\n               tabindex=\"-1\">\n    </ae-select>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <input\n      style=\"display: none\"\n      #fgInput>\n    <button [id]=\"'foregroundColorPicker-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); ; showColorPicker()\"\n            title=\"Text Color\"\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('textColor')\" tabindex=\"-1\"><span\n      class=\"color-label foreground\"><i class=\"fa fa-font\"></i></span>\n    </button>\n    <input\n      style=\"display: none\"\n      type=\"color\" (change)=\"insertColor(bgInput.value, 'backgroundColor')\"\n      #bgInput>\n    <button [id]=\"'backgroundColorPicker-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); ; bgInput.click()\"\n            title=\"Background Color\"\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('backgroundColor')\" tabindex=\"-1\"><span\n      class=\"color-label background\"><i class=\"fa fa-font\"></i></span>\n    </button>\n  </div>\n  <div *ngIf=\"_customClasses\" class=\"angular-editor-toolbar-set\">\n    <ae-select class=\"select-custom-style\" [options]=\"customClassList\"\n               [(ngModel)]=\"customClassId\"\n               (change)=\"setCustomClass(customClassId)\"\n               [disabled]=\"htmlMode\"\n               [hidden]=\"isButtonHidden('customClasses')\"\n               tabindex=\"-1\"></ae-select>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <button [id]=\"'link-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"insertUrl()\"\n            title=\"Insert Link\" [disabled]=\"isLinkButtonDisabled\" [hidden]=\"isButtonHidden('link')\" tabindex=\"-1\">\n      <i class=\"fa fa-link\"></i>\n    </button>\n    <button [id]=\"'unlink-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"triggerCommand('unlink')\"\n            title=\"Unlink\" [disabled]=\"htmlMode || !linkSelected\" [hidden]=\"isButtonHidden('unlink')\" tabindex=\"-1\">\n      <i class=\"fa fa-chain-broken\"></i>\n    </button>\n    <input\n      style=\"display: none\"\n      accept=\"image/*\"\n      type=\"file\" (change)=\"onFileChanged($event)\"\n      #fileInput>\n    <button [id]=\"'insertImage-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); fileInput.click()\"\n            title=\"Insert Image\"\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('insertImage')\" tabindex=\"-1\"><i class=\"fa fa-image\"></i>\n    </button>\n    <button [id]=\"'insertVideo-'+id\" type=\"button\" class=\"angular-editor-button\"\n            (click)=\"insertVideo()\" title=\"Insert Video\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('insertVideo')\"\n            tabindex=\"-1\"><i\n      class=\"fa fa-video-camera\"></i></button>\n    <button [id]=\"'insertHorizontalRule-'+id\" type=\"button\" title=\"Horizontal Line\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('insertHorizontalRule')\" [disabled]=\"htmlMode\"\n            [hidden]=\"isButtonHidden('insertHorizontalRule')\" tabindex=\"-1\"><i\n      class=\"fa fa-minus\"></i></button>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <button [id]=\"'clearFormatting-'+id\" type=\"button\" title=\"Clear Formatting\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('removeFormat')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('removeFormat')\"\n            tabindex=\"-1\"><i class='fa fa-remove'></i>\n    </button>\n  </div>\n  <div class=\"angular-editor-toolbar-set\">\n    <button [id]=\"'toggleEditorMode-'+id\" type=\"button\" title=\"HTML Code\" class=\"angular-editor-button\"\n            (click)=\"triggerCommand('toggleEditorMode')\" [hidden]=\"isButtonHidden('toggleEditorMode')\" tabindex=\"-1\"><i\n      class='fa fa-code'></i></button>\n  </div>\n</div>\n","import {\n  Attribute,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef, HostBinding,\n  HostListener,\n  Input,\n  OnInit,\n  Output,\n  Renderer2,\n  ViewChild,\n  ViewEncapsulation\n} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {isDefined} from '../utils';\n\nexport interface SelectOption {\n  label: string;\n  value: string;\n}\n\n@Component({\n  selector: 'ae-select',\n  templateUrl: './ae-select.component.html',\n  styleUrls: ['./ae-select.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AeSelectComponent),\n      multi: true,\n    }\n  ]\n})\nexport class AeSelectComponent implements OnInit, ControlValueAccessor {\n  @Input() options: SelectOption[] = [];\n  // eslint-disable-next-line @angular-eslint/no-input-rename\n  @Input('hidden') isHidden: boolean;\n\n  selectedOption: SelectOption;\n  disabled = false;\n  optionId = 0;\n\n  get label(): string {\n    return this.selectedOption && this.selectedOption.hasOwnProperty('label') ? this.selectedOption.label : 'Select';\n  }\n\n  opened = false;\n\n  get value(): string {\n    return this.selectedOption.value;\n  }\n\n  @HostBinding('style.display') hidden = 'inline-block';\n\n  // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename\n  @Output('change') changeEvent = new EventEmitter();\n\n  @ViewChild('labelButton', {static: true}) labelButton: ElementRef;\n\n  constructor(private elRef: ElementRef,\n              private r: Renderer2,\n  ) {}\n\n  ngOnInit() {\n    this.selectedOption = this.options[0];\n    if (isDefined(this.isHidden) && this.isHidden) {\n      this.hide();\n    }\n  }\n\n  hide() {\n    this.hidden = 'none';\n  }\n\n  optionSelect(option: SelectOption, event: MouseEvent) {\n    event.stopPropagation();\n    this.setValue(option.value);\n    this.onChange(this.selectedOption.value);\n    this.changeEvent.emit(this.selectedOption.value);\n    this.onTouched();\n    this.opened = false;\n  }\n\n  toggleOpen(event: MouseEvent) {\n    // event.stopPropagation();\n    if (this.disabled) {\n      return;\n    }\n    this.opened = !this.opened;\n  }\n\n  @HostListener('document:click', ['$event'])\n  onClick($event: MouseEvent) {\n    if (!this.elRef.nativeElement.contains($event.target)) {\n      this.close();\n    }\n  }\n\n  close() {\n    this.opened = false;\n  }\n\n  get isOpen(): boolean {\n    return this.opened;\n  }\n\n  writeValue(value) {\n    if (!value || typeof value !== 'string') {\n      return;\n    }\n    this.setValue(value);\n  }\n\n  setValue(value) {\n    let index = 0;\n    const selectedEl = this.options.find((el, i) => {\n      index = i;\n      return el.value === value;\n    });\n    if (selectedEl) {\n      this.selectedOption = selectedEl;\n      this.optionId = index;\n    }\n  }\n\n  onChange: any = () => {\n  }\n  onTouched: any = () => {\n  }\n\n  registerOnChange(fn) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn) {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.labelButton.nativeElement.disabled = isDisabled;\n    const div = this.labelButton.nativeElement;\n    const action = isDisabled ? 'addClass' : 'removeClass';\n    this.r[action](div, 'disabled');\n    this.disabled = isDisabled;\n  }\n\n  @HostListener('keydown', ['$event'])\n  handleKeyDown($event: KeyboardEvent) {\n    if (!this.opened) {\n      return;\n    }\n    // console.log($event.key);\n    // if (KeyCode[$event.key]) {\n    switch ($event.key) {\n      case 'ArrowDown':\n        this._handleArrowDown($event);\n        break;\n      case 'ArrowUp':\n        this._handleArrowUp($event);\n        break;\n      case 'Space':\n        this._handleSpace($event);\n        break;\n      case 'Enter':\n        this._handleEnter($event);\n        break;\n      case 'Tab':\n        this._handleTab($event);\n        break;\n      case 'Escape':\n        this.close();\n        $event.preventDefault();\n        break;\n      case 'Backspace':\n        this._handleBackspace();\n        break;\n    }\n    // } else if ($event.key && $event.key.length === 1) {\n    // this._keyPress$.next($event.key.toLocaleLowerCase());\n    // }\n  }\n\n  _handleArrowDown($event) {\n    if (this.optionId < this.options.length - 1) {\n      this.optionId++;\n    }\n  }\n\n  _handleArrowUp($event) {\n    if (this.optionId >= 1) {\n      this.optionId--;\n    }\n  }\n\n  _handleSpace($event) {\n\n  }\n\n  _handleEnter($event) {\n    this.optionSelect(this.options[this.optionId], $event);\n  }\n\n  _handleTab($event) {\n\n  }\n\n  _handleBackspace() {\n\n  }\n}\n","<span class=\"ae-font ae-picker\" [ngClass]=\"{'ae-expanded':isOpen}\">\n  <button [tabIndex]=\"-1\" #labelButton tabindex=\"0\" type=\"button\" role=\"button\" class=\"ae-picker-label\" (click)=\"toggleOpen($event);\">{{label}}\n    <svg viewBox=\"0 0 18 18\">\n     <!-- <use x=\"0\" y=\"0\" xlink:href=\"../assets/icons.svg#hom\"></use>-->\n      <polygon class=\"ae-stroke\" points=\"7 11 9 13 11 11 7 11\"></polygon>\n      <polygon class=\"ae-stroke\" points=\"7 7 9 5 11 7 7 7\"></polygon>\n    </svg>\n  </button>\n  <span class=\"ae-picker-options\">\n    <button tabindex=\"-1\" type=\"button\" role=\"button\" class=\"ae-picker-item\"\n          *ngFor=\"let item of options; let i = index\"\n          [ngClass]=\"{'selected': item.value === value, 'focused': i === optionId}\"\n          (click)=\"optionSelect(item, $event)\">\n          {{item.label}}\n    </button>\n    <span class=\"dropdown-item\" *ngIf=\"!options.length\">No items for select</span>\n  </span>\n</span>\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","import {NgModule} from '@angular/core';\nimport {AngularEditorComponent} from './angular-editor.component';\nimport {AngularEditorToolbarComponent} from './angular-editor-toolbar.component';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {CommonModule} from '@angular/common';\nimport { AeSelectComponent } from './ae-select/ae-select.component';\n\n@NgModule({\n  imports: [\n    CommonModule, FormsModule, ReactiveFormsModule\n  ],\n  declarations: [AngularEditorComponent, AngularEditorToolbarComponent, AeSelectComponent],\n  exports: [AngularEditorComponent, AngularEditorToolbarComponent]\n})\nexport class AngularEditorModule {\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppComponent } from './app.component';\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\nimport {HttpClientModule} from '@angular/common/http';\nimport {AngularEditorModule} from '../../../angular-editor/src/lib/angular-editor.module';\n\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    AngularEditorModule,\n    HttpClientModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import {\n  AfterViewInit,\n  Attribute,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  forwardRef,\n  HostBinding,\n  HostListener,\n  Inject,\n  Input,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  SecurityContext,\n  ViewChild\n} from '@angular/core';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\nimport {AngularEditorConfig, angularEditorConfig} from './config';\nimport {AngularEditorToolbarComponent} from './angular-editor-toolbar.component';\nimport {AngularEditorService} from './angular-editor.service';\nimport {DOCUMENT} from '@angular/common';\nimport {DomSanitizer} from '@angular/platform-browser';\nimport {isDefined} from './utils';\n\n@Component({\n  selector: 'angular-editor',\n  templateUrl: './angular-editor.component.html',\n  styleUrls: ['./angular-editor.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => AngularEditorComponent),\n      multi: true\n    },\n    AngularEditorService\n  ]\n})\nexport class AngularEditorComponent implements OnInit, ControlValueAccessor, AfterViewInit, OnDestroy {\n\n  private onChange: (value: string) => void;\n  private onTouched: () => void;\n\n  modeVisual = true;\n  showPlaceholder = false;\n  disabled = false;\n  focused = false;\n  touched = false;\n  changed = false;\n\n  focusInstance: any;\n  blurInstance: any;\n\n  @Input() id = '';\n  @Input() config: AngularEditorConfig = angularEditorConfig;\n  @Input() placeholder = '';\n  @Input() tabIndex: number | null;\n\n  @Output() html;\n\n  @ViewChild('editor', {static: true}) textArea: ElementRef;\n  @ViewChild('editorWrapper', {static: true}) editorWrapper: ElementRef;\n  @ViewChild('editorToolbar') editorToolbar: AngularEditorToolbarComponent;\n\n  @Output() viewMode = new EventEmitter<boolean>();\n\n  /** emits `blur` event when focused out from the textarea */\n    // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename\n  @Output('blur') blurEvent: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\n\n  /** emits `focus` event when focused in to the textarea */\n    // eslint-disable-next-line @angular-eslint/no-output-rename, @angular-eslint/no-output-native\n  @Output('focus') focusEvent: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\n\n  @HostBinding('attr.tabindex') tabindex = -1;\n\n  @HostListener('focus')\n  onFocus() {\n    this.focus();\n  }\n\n  constructor(\n    private r: Renderer2,\n    private editorService: AngularEditorService,\n    @Inject(DOCUMENT) private doc: any,\n    private sanitizer: DomSanitizer,\n    private cdRef: ChangeDetectorRef,\n    @Attribute('tabindex') defaultTabIndex: string,\n    @Attribute('autofocus') private autoFocus: any\n  ) {\n    const parsedTabIndex = Number(defaultTabIndex);\n    this.tabIndex = (parsedTabIndex || parsedTabIndex === 0) ? parsedTabIndex : null;\n  }\n\n  ngOnInit() {\n    this.config.toolbarPosition = this.config.toolbarPosition ? this.config.toolbarPosition : angularEditorConfig.toolbarPosition;\n  }\n\n  ngAfterViewInit() {\n    if (isDefined(this.autoFocus)) {\n      this.focus();\n    }\n  }\n\n  onPaste(event: ClipboardEvent){\n    if (this.config.rawPaste) {\n      event.preventDefault();\n      const text = event.clipboardData.getData('text/plain');\n      document.execCommand('insertHTML', false, text);\n      return text;\n    }\n  }\n\n  /**\n   * Executed command from editor header buttons\n   * @param command string from triggerCommand\n   */\n  executeCommand(command: string) {\n    this.focus();\n    if (command === 'focus') {\n      return;\n    }\n    if (command === 'toggleEditorMode') {\n      this.toggleEditorMode(this.modeVisual);\n    } else if (command !== '') {\n      if (command === 'clear') {\n        this.editorService.removeSelectedElements(this.getCustomTags());\n        this.onContentChange(this.textArea.nativeElement);\n      } else if (command === 'default') {\n        this.editorService.removeSelectedElements('h1,h2,h3,h4,h5,h6,p,pre');\n        this.onContentChange(this.textArea.nativeElement);\n      } else {\n        this.editorService.executeCommand(command);\n      }\n      this.exec();\n    }\n  }\n\n  /**\n   * focus event\n   */\n  onTextAreaFocus(event: FocusEvent): void {\n    if (this.focused) {\n      event.stopPropagation();\n      return;\n    }\n    this.focused = true;\n    this.focusEvent.emit(event);\n    if (!this.touched || !this.changed) {\n      this.editorService.executeInNextQueueIteration(() => {\n        this.configure();\n        this.touched = true;\n      });\n    }\n  }\n\n  /**\n   * @description fires when cursor leaves textarea\n   */\n  public onTextAreaMouseOut(event: MouseEvent): void {\n    this.editorService.saveSelection();\n  }\n\n  /**\n   * blur event\n   */\n  onTextAreaBlur(event: FocusEvent) {\n    /**\n     * save selection if focussed out\n     */\n    this.editorService.executeInNextQueueIteration(this.editorService.saveSelection);\n\n    if (typeof this.onTouched === 'function') {\n      this.onTouched();\n    }\n\n    if (event.relatedTarget !== null) {\n      const parent = (event.relatedTarget as HTMLElement).parentElement;\n      if (!parent.classList.contains('angular-editor-toolbar-set') && !parent.classList.contains('ae-picker')) {\n        this.blurEvent.emit(event);\n        this.focused = false;\n      }\n    }\n  }\n\n  /**\n   *  focus the text area when the editor is focused\n   */\n  focus() {\n    if (this.modeVisual) {\n      this.textArea.nativeElement.focus();\n    } else {\n      const sourceText = this.doc.getElementById('sourceText' + this.id);\n      sourceText.focus();\n      this.focused = true;\n    }\n  }\n\n  /**\n   * Executed from the contenteditable section while the input property changes\n   * @param element html element from contenteditable\n   */\n  onContentChange(element: HTMLElement): void {\n    let html = '';\n    if (this.modeVisual) {\n      html = element.innerHTML;\n    } else {\n      html = element.innerText;\n    }\n    if ((!html || html === '<br>')) {\n      html = '';\n    }\n    if (typeof this.onChange === 'function') {\n      this.onChange(this.config.sanitize || this.config.sanitize === undefined ?\n        this.sanitizer.sanitize(SecurityContext.HTML, html) : html);\n      if ((!html) !== this.showPlaceholder) {\n        this.togglePlaceholder(this.showPlaceholder);\n      }\n    }\n    this.changed = true;\n  }\n\n  /**\n   * Set the function to be called\n   * when the control receives a change event.\n   *\n   * @param fn a function\n   */\n  registerOnChange(fn: any): void {\n    this.onChange = e => (e === '<br>' ? fn('') : fn(e)) ;\n  }\n\n  /**\n   * Set the function to be called\n   * when the control receives a touch event.\n   *\n   * @param fn a function\n   */\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  /**\n   * Write a new value to the element.\n   *\n   * @param value value to be executed when there is a change in contenteditable\n   */\n  writeValue(value: any): void {\n\n    if ((!value || value === '<br>' || value === '') !== this.showPlaceholder) {\n      this.togglePlaceholder(this.showPlaceholder);\n    }\n\n    if (value === undefined || value === '' || value === '<br>') {\n      value = null;\n    }\n\n    this.refreshView(value);\n  }\n\n  /**\n   * refresh view/HTML of the editor\n   *\n   * @param value html string from the editor\n   */\n  refreshView(value: string): void {\n    const normalizedValue = value === null ? '' : value;\n    this.r.setProperty(this.textArea.nativeElement, 'innerHTML', normalizedValue);\n\n    return;\n  }\n\n  /**\n   * toggles placeholder based on input string\n   *\n   * @param value A HTML string from the editor\n   */\n  togglePlaceholder(value: boolean): void {\n    if (!value) {\n      this.r.addClass(this.editorWrapper.nativeElement, 'show-placeholder');\n      this.showPlaceholder = true;\n\n    } else {\n      this.r.removeClass(this.editorWrapper.nativeElement, 'show-placeholder');\n      this.showPlaceholder = false;\n    }\n  }\n\n  /**\n   * Implements disabled state for this element\n   *\n   * @param isDisabled Disabled flag\n   */\n  setDisabledState(isDisabled: boolean): void {\n    const div = this.textArea.nativeElement;\n    const action = isDisabled ? 'addClass' : 'removeClass';\n    this.r[action](div, 'disabled');\n    this.disabled = isDisabled;\n  }\n\n  /**\n   * toggles editor mode based on bToSource bool\n   *\n   * @param bToSource A boolean value from the editor\n   */\n  toggleEditorMode(bToSource: boolean) {\n    let oContent: any;\n    const editableElement = this.textArea.nativeElement;\n\n    if (bToSource) {\n      oContent = this.r.createText(editableElement.innerHTML);\n      this.r.setProperty(editableElement, 'innerHTML', '');\n      this.r.setProperty(editableElement, 'contentEditable', false);\n\n      const oPre = this.r.createElement('pre');\n      this.r.setStyle(oPre, 'margin', '0');\n      this.r.setStyle(oPre, 'outline', 'none');\n\n      const oCode = this.r.createElement('code');\n      this.r.setProperty(oCode, 'id', 'sourceText' + this.id);\n      this.r.setStyle(oCode, 'display', 'block');\n      this.r.setStyle(oCode, 'white-space', 'pre-wrap');\n      this.r.setStyle(oCode, 'word-break', 'keep-all');\n      this.r.setStyle(oCode, 'outline', 'none');\n      this.r.setStyle(oCode, 'margin', '0');\n      this.r.setStyle(oCode, 'background-color', '#fff5b9');\n      this.r.setProperty(oCode, 'contentEditable', true);\n      this.r.appendChild(oCode, oContent);\n      this.focusInstance = this.r.listen(oCode, 'focus', (event) => this.onTextAreaFocus(event));\n      this.blurInstance = this.r.listen(oCode, 'blur', (event) => this.onTextAreaBlur(event));\n      this.r.appendChild(oPre, oCode);\n      this.r.appendChild(editableElement, oPre);\n\n      // ToDo move to service\n      this.doc.execCommand('defaultParagraphSeparator', false, 'div');\n\n      this.modeVisual = false;\n      this.viewMode.emit(false);\n      oCode.focus();\n    } else {\n      if (this.doc.querySelectorAll) {\n        this.r.setProperty(editableElement, 'innerHTML', editableElement.innerText);\n      } else {\n        oContent = this.doc.createRange();\n        oContent.selectNodeContents(editableElement.firstChild);\n        this.r.setProperty(editableElement, 'innerHTML', oContent.toString());\n      }\n      this.r.setProperty(editableElement, 'contentEditable', true);\n      this.modeVisual = true;\n      this.viewMode.emit(true);\n      this.onContentChange(editableElement);\n      editableElement.focus();\n    }\n    this.editorToolbar.setEditorMode(!this.modeVisual);\n  }\n\n  /**\n   * toggles editor buttons when cursor moved or positioning\n   *\n   * Send a node array from the contentEditable of the editor\n   */\n  exec() {\n    this.editorToolbar.triggerButtons();\n\n    let userSelection;\n    if (this.doc.getSelection) {\n      userSelection = this.doc.getSelection();\n      this.editorService.executeInNextQueueIteration(this.editorService.saveSelection);\n    }\n\n    let a = userSelection.focusNode;\n    const els = [];\n    while (a && a.id !== 'editor') {\n      els.unshift(a);\n      a = a.parentNode;\n    }\n    this.editorToolbar.triggerBlocks(els);\n  }\n\n  private configure() {\n    this.editorService.uploadUrl = this.config.uploadUrl;\n    this.editorService.uploadWithCredentials = this.config.uploadWithCredentials;\n    if (this.config.defaultParagraphSeparator) {\n      this.editorService.setDefaultParagraphSeparator(this.config.defaultParagraphSeparator);\n    }\n    if (this.config.defaultFontName) {\n      this.editorService.setFontName(this.config.defaultFontName);\n    }\n    if (this.config.defaultFontSize) {\n      this.editorService.setFontSize(this.config.defaultFontSize);\n    }\n  }\n\n  getFonts() {\n    const fonts = this.config.fonts ? this.config.fonts : angularEditorConfig.fonts;\n    return fonts.map(x => {\n      return {label: x.name, value: x.name};\n    });\n  }\n\n  getCustomTags() {\n    const tags = ['span'];\n    this.config.customClasses.forEach(x => {\n      if (x.tag !== undefined) {\n        if (!tags.includes(x.tag)) {\n          tags.push(x.tag);\n        }\n      }\n    });\n    return tags.join(',');\n  }\n\n  ngOnDestroy() {\n    if (this.blurInstance) {\n      this.blurInstance();\n    }\n    if (this.focusInstance) {\n      this.focusInstance();\n    }\n  }\n\n  filterStyles(html: string): string {\n    html = html.replace('position: fixed;', '');\n    return html;\n  }\n}\n","<div\n     class=\"angular-editor\"\n     #angularEditor\n     [style.width]=\"config.width\"\n     [style.minWidth]=\"config.minWidth\"\n>\n     <angular-editor-toolbar\n          *ngIf=\"config.toolbarPosition === 'top'\"\n          #editorToolbar\n          [id]=\"id\"\n          [uploadUrl]=\"config.uploadUrl\"\n          [upload]=\"config.upload\"\n          [showToolbar]=\"config.showToolbar !== undefined ? config.showToolbar : true\"\n          [fonts]=\"getFonts()\"\n          [customClasses]=\"config.customClasses\"\n          [defaultFontName]=\"config.defaultFontName\"\n          [defaultFontSize]=\"config.defaultFontSize\"\n          [hiddenButtons]=\"config.toolbarHiddenButtons\"\n          (execute)=\"executeCommand($event)\"\n     ></angular-editor-toolbar>\n\n     <div\n          class=\"angular-editor-wrapper\"\n          #editorWrapper\n     >\n          <div\n               #editor\n               class=\"angular-editor-textarea\"\n               [attr.contenteditable]=\"config.editable\"\n               [attr.tabindex]=\"disabled ? -1 : tabIndex\"\n               [attr.translate]=\"config.translate\"\n               [attr.spellcheck]=\"config.spellcheck\"\n               [style.height]=\"config.height\"\n               [style.minHeight]=\"config.minHeight\"\n               [style.maxHeight]=\"config.maxHeight\"\n               [style.outline]=\"config.outline === false ? 'none': undefined\"\n               (input)=\"onContentChange($event.target)\"\n               (focus)=\"onTextAreaFocus($event)\"\n               (blur)=\"onTextAreaBlur($event)\"\n               (click)=\"exec()\"\n               (keyup)=\"exec()\"\n               (mouseout)=\"onTextAreaMouseOut($event)\"\n               (paste)=\"onPaste($event)\"\n          >\n          </div>\n          <span class=\"angular-editor-placeholder\">{{ placeholder || config['placeholder'] }}</span>\n     </div>\n     <angular-editor-toolbar\n          *ngIf=\"config.toolbarPosition === 'bottom'\"\n          #editorToolbar\n          [id]=\"id\"\n          [uploadUrl]=\"config.uploadUrl\"\n          [upload]=\"config.upload\"\n          [showToolbar]=\"config.showToolbar !== undefined ? config.showToolbar : true\"\n          [fonts]=\"getFonts()\"\n          [customClasses]=\"config.customClasses\"\n          [defaultFontName]=\"config.defaultFontName\"\n          [defaultFontSize]=\"config.defaultFontSize\"\n          [hiddenButtons]=\"config.toolbarHiddenButtons\"\n          (execute)=\"executeCommand($event)\"\n     ></angular-editor-toolbar>\n</div>\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"bdER\";","import {Inject, Injectable} from '@angular/core';\nimport {HttpClient, HttpEvent} from '@angular/common/http';\nimport {Observable} from 'rxjs';\nimport {DOCUMENT} from '@angular/common';\nimport {CustomClass} from './config';\n\nexport interface UploadResponse {\n  imageUrl: string;\n}\n\n@Injectable()\nexport class AngularEditorService {\n\n  savedSelection: Range | null;\n  selectedText: string;\n  uploadUrl: string;\n  uploadWithCredentials: boolean;\n\n  constructor(\n    private http: HttpClient,\n    @Inject(DOCUMENT) private doc: any\n  ) { }\n\n  /**\n   * Executed command from editor header buttons exclude toggleEditorMode\n   * @param command string from triggerCommand\n   */\n  executeCommand(command: string) {\n    const commands = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'pre'];\n    if (commands.includes(command)) {\n      this.doc.execCommand('formatBlock', false, command);\n      return;\n    }\n    this.doc.execCommand(command, false, null);\n  }\n\n  /**\n   * Create URL link\n   * @param url string from UI prompt\n   */\n  createLink(url: string) {\n    if (!url.includes('http')) {\n      this.doc.execCommand('createlink', false, url);\n    } else {\n      const newUrl = '<a href=\"' + url + '\" target=\"_blank\">' + this.selectedText + '</a>';\n      this.insertHtml(newUrl);\n    }\n  }\n\n  /**\n   * insert color either font or background\n   *\n   * @param color color to be inserted\n   * @param where where the color has to be inserted either text/background\n   */\n  insertColor(color: string, where: string): void {\n    const restored = this.restoreSelection();\n    if (restored) {\n      if (where === 'textColor') {\n        this.doc.execCommand('foreColor', false, color);\n      } else {\n        this.doc.execCommand('hiliteColor', false, color);\n      }\n    }\n  }\n\n  /**\n   * Set font name\n   * @param fontName string\n   */\n  setFontName(fontName: string) {\n    this.doc.execCommand('fontName', false, fontName);\n  }\n\n  /**\n   * Set font size\n   * @param fontSize string\n   */\n  setFontSize(fontSize: string) {\n    this.doc.execCommand('fontSize', false, fontSize);\n  }\n\n  /**\n   * Create raw HTML\n   * @param html HTML string\n   */\n  insertHtml(html: string): void {\n\n    const isHTMLInserted = this.doc.execCommand('insertHTML', false, html);\n\n    if (!isHTMLInserted) {\n      throw new Error('Unable to perform the operation');\n    }\n  }\n\n  /**\n   * save selection when the editor is focussed out\n   */\n  public saveSelection = (): void => {\n    if (this.doc.getSelection) {\n      const sel = this.doc.getSelection();\n      if (sel.getRangeAt && sel.rangeCount) {\n        this.savedSelection = sel.getRangeAt(0);\n        this.selectedText = sel.toString();\n      }\n    } else if (this.doc.getSelection && this.doc.createRange) {\n      this.savedSelection = document.createRange();\n    } else {\n      this.savedSelection = null;\n    }\n  }\n\n  /**\n   * restore selection when the editor is focused in\n   *\n   * saved selection when the editor is focused out\n   */\n  restoreSelection(): boolean {\n    if (this.savedSelection) {\n      if (this.doc.getSelection) {\n        const sel = this.doc.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(this.savedSelection);\n        return true;\n      } else if (this.doc.getSelection /*&& this.savedSelection.select*/) {\n        // this.savedSelection.select();\n        return true;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * setTimeout used for execute 'saveSelection' method in next event loop iteration\n   */\n  public executeInNextQueueIteration(callbackFn: (...args: any[]) => any, timeout = 1e2): void {\n    setTimeout(callbackFn, timeout);\n  }\n\n  /** check any selection is made or not */\n  private checkSelection(): any {\n\n    const selectedText = this.savedSelection.toString();\n\n    if (selectedText.length === 0) {\n      throw new Error('No Selection Made');\n    }\n    return true;\n  }\n\n  /**\n   * Upload file to uploadUrl\n   * @param file The file\n   */\n  uploadImage(file: File): Observable<HttpEvent<UploadResponse>> {\n\n    const uploadData: FormData = new FormData();\n\n    uploadData.append('file', file, file.name);\n\n    return this.http.post<UploadResponse>(this.uploadUrl, uploadData, {\n      reportProgress: true,\n      observe: 'events',\n      withCredentials: this.uploadWithCredentials,\n    });\n  }\n\n  /**\n   * Insert image with Url\n   * @param imageUrl The imageUrl.\n   */\n  insertImage(imageUrl: string) {\n    this.doc.execCommand('insertImage', false, imageUrl);\n  }\n\n  setDefaultParagraphSeparator(separator: string) {\n    this.doc.execCommand('defaultParagraphSeparator', false, separator);\n  }\n\n  createCustomClass(customClass: CustomClass) {\n    let newTag = this.selectedText;\n    if (customClass) {\n      const tagName = customClass.tag ? customClass.tag : 'span';\n      newTag = '<' + tagName + ' class=\"' + customClass.class + '\">' + this.selectedText + '</' + tagName + '>';\n    }\n    this.insertHtml(newTag);\n  }\n\n  insertVideo(videoUrl: string) {\n    if (videoUrl.match('www.youtube.com')) {\n      this.insertYouTubeVideoTag(videoUrl);\n    }\n    if (videoUrl.match('vimeo.com')) {\n      this.insertVimeoVideoTag(videoUrl);\n    }\n  }\n\n  private insertYouTubeVideoTag(videoUrl: string): void {\n    const id = videoUrl.split('v=')[1];\n    const imageUrl = `https://img.youtube.com/vi/${id}/0.jpg`;\n    const thumbnail = `\n      <div style='position: relative'>\n        <a href='${videoUrl}' target='_blank'>\n          <img src=\"${imageUrl}\" alt=\"click to watch\"/>\n          <img style='position: absolute; left:200px; top:140px'\n          src=\"https://img.icons8.com/color/96/000000/youtube-play.png\"/>\n        </a>\n      </div>`;\n    this.insertHtml(thumbnail);\n  }\n\n  private insertVimeoVideoTag(videoUrl: string): void {\n    const sub = this.http.get<any>(`https://vimeo.com/api/oembed.json?url=${videoUrl}`).subscribe(data => {\n      const imageUrl = data.thumbnail_url_with_play_button;\n      const thumbnail = `<div>\n        <a href='${videoUrl}' target='_blank'>\n          <img src=\"${imageUrl}\" alt=\"${data.title}\"/>\n        </a>\n      </div>`;\n      this.insertHtml(thumbnail);\n      sub.unsubscribe();\n    });\n  }\n\n  nextNode(node) {\n    if (node.hasChildNodes()) {\n      return node.firstChild;\n    } else {\n      while (node && !node.nextSibling) {\n        node = node.parentNode;\n      }\n      if (!node) {\n        return null;\n      }\n      return node.nextSibling;\n    }\n  }\n\n  getRangeSelectedNodes(range, includePartiallySelectedContainers) {\n    let node = range.startContainer;\n    const endNode = range.endContainer;\n    let rangeNodes = [];\n\n    // Special case for a range that is contained within a single node\n    if (node === endNode) {\n      rangeNodes = [node];\n    } else {\n      // Iterate nodes until we hit the end container\n      while (node && node !== endNode) {\n        rangeNodes.push( node = this.nextNode(node) );\n      }\n\n      // Add partially selected nodes at the start of the range\n      node = range.startContainer;\n      while (node && node !== range.commonAncestorContainer) {\n        rangeNodes.unshift(node);\n        node = node.parentNode;\n      }\n    }\n\n    // Add ancestors of the range container, if required\n    if (includePartiallySelectedContainers) {\n      node = range.commonAncestorContainer;\n      while (node) {\n        rangeNodes.push(node);\n        node = node.parentNode;\n      }\n    }\n\n    return rangeNodes;\n  }\n\n  getSelectedNodes() {\n    const nodes = [];\n    if (this.doc.getSelection) {\n      const sel = this.doc.getSelection();\n      for (let i = 0, len = sel.rangeCount; i < len; ++i) {\n        nodes.push.apply(nodes, this.getRangeSelectedNodes(sel.getRangeAt(i), true));\n      }\n    }\n    return nodes;\n  }\n\n  replaceWithOwnChildren(el) {\n    const parent = el.parentNode;\n    while (el.hasChildNodes()) {\n      parent.insertBefore(el.firstChild, el);\n    }\n    parent.removeChild(el);\n  }\n\n  removeSelectedElements(tagNames) {\n    const tagNamesArray = tagNames.toLowerCase().split(',');\n    this.getSelectedNodes().forEach((node) => {\n      if (node.nodeType === 1 &&\n        tagNamesArray.indexOf(node.tagName.toLowerCase()) > -1) {\n        // Remove the node and replace it with its children\n        this.replaceWithOwnChildren(node);\n      }\n    });\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { UploadResponse } from './angular-editor.service';\nimport { HttpEvent } from '@angular/common/http';\nimport { Observable } from 'rxjs';\n\nexport interface CustomClass {\n  name: string;\n  class: string;\n  tag?: string;\n}\n\nexport interface Font {\n  name: string;\n  class: string;\n}\n\nexport interface AngularEditorConfig {\n  editable?: boolean;\n  spellcheck?: boolean;\n  height?: 'auto' | string;\n  minHeight?: '0' | string;\n  maxHeight?: 'auto' | string;\n  width?: 'auto' | string;\n  minWidth?: '0' | string;\n  translate?: 'yes' | 'now' | string;\n  enableToolbar?: boolean;\n  showToolbar?: boolean;\n  placeholder?: string;\n  defaultParagraphSeparator?: string;\n  defaultFontName?: string;\n  defaultFontSize?: '1' | '2' | '3' | '4' | '5' | '6' | '7' | string;\n  uploadUrl?: string;\n  upload?: (file: File) => Observable<HttpEvent<UploadResponse>>;\n  uploadWithCredentials?: boolean;\n  fonts?: Font[];\n  customClasses?: CustomClass[];\n  sanitize?: boolean;\n  toolbarPosition?: 'top' | 'bottom';\n  outline?: boolean;\n  toolbarHiddenButtons?: string[][];\n  rawPaste?: boolean;\n}\n\nexport const angularEditorConfig: AngularEditorConfig = {\n  editable: true,\n  spellcheck: true,\n  height: 'auto',\n  minHeight: '0',\n  maxHeight: 'auto',\n  width: 'auto',\n  minWidth: '0',\n  translate: 'yes',\n  enableToolbar: true,\n  showToolbar: true,\n  placeholder: 'Enter text here...',\n  defaultParagraphSeparator: '',\n  defaultFontName: '',\n  defaultFontSize: '',\n  fonts: [\n    {class: 'arial', name: 'Arial'},\n    {class: 'times-new-roman', name: 'Times New Roman'},\n    {class: 'calibri', name: 'Calibri'},\n    {class: 'comic-sans-ms', name: 'Comic Sans MS'}\n  ],\n  uploadUrl: 'v1/image',\n  uploadWithCredentials: false,\n  sanitize: true,\n  toolbarPosition: 'top',\n  outline: true,\n  /*toolbarHiddenButtons: [\n    ['bold', 'italic', 'underline', 'strikeThrough', 'superscript', 'subscript'],\n    ['heading', 'fontName', 'fontSize', 'color'],\n    ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'indent', 'outdent'],\n    ['cut', 'copy', 'delete', 'removeFormat', 'undo', 'redo'],\n    ['paragraph', 'blockquote', 'removeBlockquote', 'horizontalLine', 'orderedList', 'unorderedList'],\n    ['link', 'unlink', 'image', 'video']\n  ]*/\n};\n","import {Component, OnInit} from '@angular/core';\nimport {AngularEditorConfig} from 'angular-editor';\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent implements OnInit {\n  title = 'app';\n\n  form: FormGroup;\n\n  htmlContent1 = '';\n  htmlContent2 = '';\n\n  config1: AngularEditorConfig = {\n    editable: true,\n    spellcheck: true,\n    minHeight: '5rem',\n    maxHeight: '15rem',\n    placeholder: 'Enter text here...',\n    translate: 'no',\n    sanitize: false,\n    // toolbarPosition: 'top',\n    outline: true,\n    defaultFontName: 'Comic Sans MS',\n    defaultFontSize: '5',\n    // showToolbar: false,\n    defaultParagraphSeparator: 'p',\n    customClasses: [\n      {\n        name: 'quote',\n        class: 'quote',\n      },\n      {\n        name: 'redText',\n        class: 'redText'\n      },\n      {\n        name: 'titleText',\n        class: 'titleText',\n        tag: 'h1',\n      },\n    ],\n    toolbarHiddenButtons: [\n      ['bold', 'italic'],\n      ['fontSize']\n    ]\n  };\n\n  config2: AngularEditorConfig = {\n    editable: true,\n    spellcheck: true,\n    minHeight: '5rem',\n    maxHeight: '15rem',\n    placeholder: 'Enter text here...',\n    translate: 'no',\n    sanitize: true,\n    toolbarPosition: 'bottom',\n    defaultFontName: 'Comic Sans MS',\n    defaultFontSize: '5',\n    defaultParagraphSeparator: 'p',\n    customClasses: [\n      {\n        name: 'quote',\n        class: 'quote',\n      },\n      {\n        name: 'redText',\n        class: 'redText'\n      },\n      {\n        name: 'titleText',\n        class: 'titleText',\n        tag: 'h1',\n      },\n    ]\n  };\n\n  constructor(private formBuilder: FormBuilder) {}\n\n  ngOnInit() {\n    this.form = this.formBuilder.group({\n      signature: ['', Validators.required]\n    });\n    console.log(this.htmlContent1);\n  }\n\n  onChange(event) {\n    console.log('changed');\n  }\n\n  onBlur(event) {\n    console.log('blur ' + event);\n  }\n\n  onChange2(event) {\n    console.warn(this.form.value);\n  }\n}\n","<div class=\"container\">\n  <h1>Angular Editor</h1>\n  <p><a href=\"https://github.com/kolkov/angular-editor\">Get it here</a></p>\n\n  <label for=\"test_input\">Test input </label>\n  <input id=\"test_input\">\n  <br><br>\n  <angular-editor id=\"editor1\" [(ngModel)]=\"htmlContent1\" [config]=\"config1\" (ngModelChange)=\"onChange($event)\"\n                  (blur)=\"onBlur($event)\"></angular-editor>\n  <p class=\"html\">\n    HTML Output:  {{ htmlContent1 }}\n  </p>\n  <form [formGroup]=\"form\">\n    <angular-editor autofocus=\"true\" id=\"editor2\" formControlName=\"signature\" [config]=\"config2\" (ngModelChange)=\"onChange2($event)\"></angular-editor>\n  </form>\n  <p>\n    Form Value: {{ form.value.signature }}\n  </p>\n  <p>\n    Form Status: {{ form.status }}\n  </p>\n</div>\n\n"]}